/*! VComponents-0.2.0.js 2018-03-14 */

define("js/AutoSplit",[],function(a,b,c){function d(){$.fn.autoSplit||($.fn.autoSplit=function(a){if(!this.data("isBinded")){var b=$.extend({length:3,split:"/",distinct:!1,autoAll:!0,cbFn:function(){},upcase:!0,suportNum:!1},a);this.on("keydown",function(a){var c=a.keyCode,d=$(this).val();return("---"!==$(this).val()||8===c)&&(!((c>=48&&c<=57||c>=96&&c<=105)&&!b.suportNum)&&(189!==c&&109!==c||""===d||"-"===d||"--"===d))}),this.on("keyup",function(){var a=$(this).val();if("---"===a||b.autoAll&&(""===a||"-"===a||"--"===a))a=a;else{b.upcase&&(a=a.toUpperCase()),a=a.replace(new RegExp(b.split,"gm"),"");for(var c=[],d=0;d<a.length;d++)c.push(a.substr(d,b.length)),d+=b.length-1;if(b.distinct){for(var e,f={},g=0,h=c.length;g<h;g++)f[c[g]]=c[g];c=[];for(e in f)c.push(e)}a=c.join(b.split)}$(this).val(a),b.cbFn(a)}),this.data("isBinded",!0)}})}b.init=d}),define("js/Cabin",["../js/Common"],function(a,b,c){function d(a,b){this.id=f.cid("vetech-cabin"),this.elem=a,this.$elem=$(a),this.opts=$.extend(!0,{},e,b),this.isShow=!1,this.checkedData={},this.dataItems=[],this.$hiddenInput=$("#"+this.opts.hiddenName),this.data=[],this.dataBuffer=[],this.init()}var e={width:400,height:null,hiddenName:null,content:"",autoClose:!1,defer:2e3,allCheck:"---",fn1:null,splitStr:"/",fn2:null,ajaxOpts:{type:"get"},simpleData:{id:"id",name:"name"},qDatas:{},pos:[]},f=a("../js/Common");return d.prototype.checkedAll=function(a){var b=$(a.target);b.hasClass("active")?(b.removeClass("active"),this.$container.find("label").removeClass("active")):(b.addClass("active"),this.$container.find("label").addClass("active")),this.setValue()},d.prototype.init=function(){this.$container=$('<div class="vetech-cabin"></div>'),this.$container.css("width",this.opts.width),$(document.body).append(this.$container)},d.prototype.load=function(a){var b=this;1===this.opts.type?(this.data=this.opts.typeValue,a.call(this,this.data)):$.ajax($.extend(!0,{type:"get",url:this.opts.typeValue,data:this.opts.qDatas,success:function(c){b.data=c,a.call(b,b.data)}},this.opts.ajaxOpts))},d.prototype.render=function(){if(this.dataBuffer=[],"array"!==$.type(this.data))throw new TypeError("数据格式错误，需要[object Array]格式");this.$container.html("");for(var a=this.opts.width-80-2,b=this.opts.simpleData.name,c=0,d=this.data.length;c<d;c++){var e=this.data[c],f=$('<dl class="clearfix"></dl>'),g=$('<dt><label class="title">'+(this.opts.fn1?this.opts.fn1(e):e.name)+"</label></dt>");g.css("width",80);var h=$("<dd></dd>");h.css("width",a);var i=$('<ul class="clearfix"></ul>');h.append(i),f.append(g).append(h);for(var j=0,k=e.childs.length;j<k;j++){var l=e.childs[j],m="";m="1"===l.isPublish?"publish-seat":"no-publish-seat";var n=$('<li><label class="item '+m+'">'+(this.opts.fn2?this.opts.fn2(l):l[b])+"</label></li>");n.data("data",l),i.append(n)}this.$container.append(f)}this.data.length&&this.addToolbar()},d.prototype.addToolbar=function(){var a=this.opts.width-80-2;this.$toolbar=$('<dl class="clearfix toolbar"></dl>'),this.$toolbar.append('<dt style="width:80"><label class="checked-all-btn">全选</label></dt>'),this.$tips=$('<dd style="width:'+a+'"><ul class="clearfix"><li>图例：</li><li><div class="tips">公布运价</div></li><li><div class="tips bgRed">非公布运价</div></li></ul></dd>'),this.$toolbar.append(this.$tips),this.$container.append(this.$toolbar),this.bindEvent(),this.writeValue()},d.prototype.show=function(){this.elem.readOnly||this.isShow||(this.setPos(),this.isShow=!0,this.$container.css("visibility","visible"))},d.prototype.hide=function(){this.isShow&&(this.$container.css({visibility:"hidden",left:-1e3,top:-1e3}),this.isShow=!1)},d.prototype.setPos=function(){var a=this.$elem.offset(),b=$(document).outerWidth(),c=a.top+this.$elem.outerHeight(),d=a.left+this.$container.outerWidth()>b?a.left+this.$elem.outerWidth()-this.$container.outerWidth():a.left;this.$container.css({left:d,top:c})},d.prototype.writeValue=function(){this.$container.find(".item").removeClass("active");var a=this.$hiddenInput.length?this.$hiddenInput.val():this.$elem.val();a===this.opts.allCheck?(this.$container.find(".checked-all-btn").addClass("active"),this.$container.find("label").addClass("active"),this.setValue()):(a=a.split(this.opts.splitStr),this.$container.find(".item").each(function(b,c){$.inArray($(c).parent().data("data").id,a)>-1&&$(c).addClass("active")})),this.setValue()},d.prototype.writeValueByInput=function(a){a=(a||"").toUpperCase();var b=this.opts.splitStr;if(this.opts.allCheck&&a===this.opts.allCheck)this.$hiddenInput.val(this.opts.allCheck);else{var c=a.substring(a.length-1);if(c===b||"-"===c)return;for(var d=a.split(b),e=[],f=0,g=d.length;f<g;f++)-1===d[f].indexOf("-")?e.push(d[f]):e=e.concat(this._getCarbinByValues(d[f]));this.$hiddenInput.length?this.$hiddenInput.val(e.join(b)):this.$elem.val(e.join(this.opts.splitStr))}this.writeValue()},d.prototype._getCarbinByValues=function(a){var b=this._getIndexByValue(a.split("-")[0]),c=this._getIndexByValue(a.split("-")[1]),d=this.$container.find(".item");if(-1!==b&&-1!==c){var e=[];if(b>=c)e.push(d.eq(b).data("data").id);else for(var f=b;f<=c;f++)e.push(d.eq(f).parent().data("data").id);return e}},d.prototype._getIndexByValue=function(a){for(var b=this.$container.find(".item"),c=0,d=b.length;c<d;c++){if(b.eq(c).parent().data("data").id===a)return c}return-1},d.prototype.setValue=function(){if(this.opts.allCheck&&this.$container.find(".checked-all-btn").hasClass("active"))this.$hiddenInput.val(this.opts.allCheck),this.$elem.val(this.opts.allCheck),this.opts.cbFn(this.opts.allCheck);else{for(var a=this.$container.find(".item"),b=[],c=[],d=this.opts.simpleData.id,e=[],f=0,g=a.length;f<g;f++){var h=a.eq(f),i=h.parent().data("data")[d];h.hasClass("active")?(b.push(i),c.push(i)):(b.length>2?e.push(b[0]+"-"+b[b.length-1]):e=e.concat(b),b.length=0)}b.length&&(b.length>2?e.push(b[0]+"-"+b[b.length-1]):e=e.concat(b));var j=this.opts.splitStr;this.$hiddenInput.val(c.join(j)),this.$elem.val(this.$hiddenInput.length?e.join(j):c.join(j)),this.opts.cbFn(c)}},d.prototype.bindEvent=function(){if(!this.isBindedEvent){this.isBindedEvent=!0;var a=this;this.$container.on("click.cabin",".checked-all-btn",$.proxy(this.checkedAll,this)),this.$container.on("click.cabin",".title",function(){var b=$(this),c=b.parents("dl").find("label");b.hasClass("active")?(b.removeClass("active"),c.removeClass("active")):(b.addClass("active"),c.addClass("active")),a.setAllCheckboxState(),a.setValue()}),this.$container.on("click.cabin",".item",function(){var b=$(this),c=b.parents("dd");b.hasClass("active")?b.removeClass("active"):b.addClass("active");var d=b.parents("dl").find("label.title");c.find("label").length===c.find("label.active").length?d.addClass("active"):d.removeClass("active"),a.setAllCheckboxState(),a.setValue()}),$(document).on("click.cabin",function(b){b.target!==a.elem&&a.hide()}),$(document).on("keyup.cabin",function(b){return 9!==b.keyCode||a.$elem.is(":focus")||a.hide(),!1}),this.$container.on("click.cabin",function(){return!1}),this.$elem.on("keyup.cabin",function(){a.writeValueByInput($(this).val())})}},d.prototype.setAllCheckboxState=function(){var a=this.$container.find(".checked-all-btn");this.$container.find(".title").length===this.$container.find(".title.active").length?a.addClass("active"):a.removeClass("active")},d.prototype.destroy=function(){this.$container.remove(),$(document).off(".cabin")},d}),define("js/CallCenter",["../js/Common"],function(a,b,c){function d(a){this.id=e.cid("CallCenter"),this.opts=$.extend(!0,{},f,a),this.phoneNum=this.opts.phoneNum,"function"!==$.type(this.opts.changeRestFn)&&(this.opts.changeRestFn=null),"function"!==$.type(this.opts.btnClickFn)&&(this.opts.btnClickFn=null),"function"!==$.type(this.opts.alertLayer)&&(this.opts.alertLayer=null),this.init()}var e=a("../js/Common"),f={setPosition:[-20,150],width:154,stateWidth:2,itemWidth:3,phoneNum:"",defaultItems:[{id:"callcenter1",icon:"&#xe650;",value:"签入"},{id:"callcenter2",icon:"&#xe64d;",value:"签出"},{id:"callcenter3",icon:"&#xe671;",value:"示忙"},{id:"callcenter4",icon:"&#xe658;",value:"保持"},{id:"callcenter5",icon:"&#xe657;",value:"静音"},{id:"callcenter6",icon:"&#xe675;",value:"呼转"},{id:"callcenter7",icon:"&#xe6ea;",value:"拨打"},{id:"callcenter8",icon:"&#xe651;",value:"监听"},{id:"callcenter9",icon:"&#xe66f;",value:"回复"},{id:"callcenter10",icon:"&#xe64c;",value:"外呼"},{id:"callcenter11",icon:"&#xe686;",value:"评价"},{id:"callcenter12",icon:"&#xe68a;",value:"自动催单"}],addItems:[],setRadioState:[0,0],setStates:{},setSelectData:[{id:"s001",value:"选择"},{id:"s002",value:"后续"},{id:"s003",value:"小休"},{id:"s004",value:"培训"},{id:"s005",value:"会议"},{id:"s006",value:"面谈"},{id:"s007",value:"用餐"}],changeRestFn:null,btnClickFn:null,alertLayerFn:null};return d.prototype.init=function(){this.$container=$('<div class="vetech-call-center"></div>'),this.$ccIcon=$('<div class="cc-header layui-clear"></div>'),this.$container.append(this.$ccIcon);var a=this.opts.setPosition[0]+"px",b=this.opts.setPosition[1]+"px";this.$container.css({right:a,top:b}),$(document).find("body").append(this.$container)},d.prototype.load=function(a){if(this.opts.setStates.state?this.titleData=this.opts.setStates.value||[]:this.titleData=[],this.opts.addItems){var b=this.opts.defaultItems.concat(this.opts.addItems);this.items=b}else this.items=this.opts.defaultItems;this.selectData=this.opts.setSelectData||[],this.render()},d.prototype.render=function(){this.$ccContent=$('<div class="cc-content"></div>');for(var a=$('<div class="cc-tel-head"><div class="cc-tel-search"><div class="layui-inline cc-color-state"><div class="cc-tel-default"></div><div class="cc-tel-default" style="margin-top: 6px;"></div></div><input type="text" placeholder="来电号码…" class="layui-inline input-phone"><a href="javascript:;" class="cc-close layui-inline"></a></div></div>'),b=$('<div class="cc-tel-con"></div>'),c=(100/this.opts.itemWidth).toFixed(2)+"%",d=$('<ul class="ctc-sort layui-clear"></ul>'),e=0,f=this.items.length;e<f;e++){var g=this.items[e].icon,h=this.items[e].id,i=this.items[e].value,j=$('<li id="'+h+'" style="width:'+c+'"><i class="icon iconfont">'+g+"</i><p>"+i+"</p></li>");j.data("data2",this.items[e]),d.append(j)}b.append(d);for(var k=$('<div class="cc-select"></div>'),l=$("<select></select>"),m=0,n=this.selectData.length;m<n;m++){var o=this.selectData[m].id,p=this.selectData[m].value,q=$("<option value="+o+">"+p+"</option>");q.data(this.selectData[m]),l.append(q)}k.append(l),b.append(k),this.$ccContent.append(a).append(b),this.$container.append(this.$ccContent),this.reloadRender(),this.setPhoneNumber(this.phoneNum),this.bindEvent()},d.prototype.bindEvent=function(){var a=this;this.$ccContent.find(".input-phone").on("dblclick",function(){$(this).val()&&($(this).select(),a.opts.alertLayerFn&&a.opts.alertLayerFn($(this).val()))}),this.setRadioState(this.opts.setRadioState),this.$container.find(".cc-select").on("change","select",function(){a.setRestValue($(this).children("option:selected").data())}),this.$container.find(".ctc-sort").on("click","li:not(.disabled)",function(){a.clickBtn($(this).data("data2"))}),this.$container.find(".cc-close").on("click",function(){a.$ccContent.find(".cc-tel-con").slideUp("fast").end().find(".cc-tel-head").animate({width:"0px",opacity:"0"},500).fadeOut("1000"),a.$ccIcon.show(),a.phoneCallIn(a.opts.telCalling)}),this.$container.on("mouseenter",function(){a.$ccIcon.is(":visible")&&a.$container.animate({right:"2px"},100)}).on("mouseleave",function(){a.$ccIcon.is(":visible")&&a.$container.animate({right:"-20px"},100)}),this.$ccIcon.on("click",function(){a.$ccIcon.removeClass("active").hide(),a.$ccContent.find(".cc-tel-head").show().animate({width:a.opts.width+"px",opacity:"1"},500).end().find(".cc-tel-con").animate({width:a.opts.width+"px"},500).slideDown("slow")})},d.prototype.reloadRender=function(){var a=this;if(this.$ccContent.find(".ctc-title").length>0&&this.$ccContent.find(".ctc-title").remove(),this.opts.setStates.state?this.titleData=this.opts.setStates.value||[]:this.titleData=[],this.titleData.length>0){for(var b=null,c=(100/this.opts.stateWidth).toFixed(2)+"%",d=$('<ul class="ctc-title layui-clear"></ul>'),e=0,f=this.titleData.length;e<f;e++){var g=this.titleData[e].name,h=this.titleData[e].num;b=this.titleData[e].alick||""?$('<li style="width:'+c+'">'+g+'：<a href="javascript:;" class="tt-alink">'+h+"</span></li>"):$('<li style="width:'+c+'">'+g+"：<span>"+h+"</span></li>"),b.data("data1",this.titleData[e]),d.append(b)}this.$ccContent.find(".cc-tel-con").prepend(d)}this.$container.find(".ctc-title").on("click",".tt-alink",function(){a.clickBtn($(this).parent().data("data1"))})},d.prototype.setPhoneNumber=function(a){this.phoneNum=a,this.$ccContent.find(".input-phone").val(this.phoneNum)},d.prototype.setRadioState=function(a){for(var b=0,c=a.length;b<c;b++)1===a[b]?this.$container.find(".cc-color-state").children().eq(b).addClass("active"):this.$container.find(".cc-color-state").children().eq(b).removeClass("active")},d.prototype.setRestValue=function(a){this.opts.changeRestFn&&this.opts.changeRestFn(a)},d.prototype.clickBtn=function(a){this.opts.btnClickFn&&this.opts.btnClickFn(a)},d.prototype.phoneCallIn=function(a){a?this.$ccIcon.addClass("active"):this.$ccIcon.removeClass("active")},d}),define("js/Common",[],function(a,b,c){function d(a){console&&console.log&&console.log(a)}function e(a){console&&console.error&&console.error(a)}function f(a){return a+"VComponents"+String(Math.random()).replace(/\D/g,"")}function g(a){e("["+a.selector+"] can't find element,ensure page loaded!")}function h(a){throw new Error("模板加载异常。"+(a||""))}function i(a){if(a){var b=a,c=b.tagName.toUpperCase(),d=window.navigator.userAgent.toLowerCase(),e=/(msie\s|trident.*rv:)([\w.]+)/.test(d),f=d.indexOf("firefox")>=0,g="SELECT"===c?"change":"click",h=document.createEvent("HTMLEvents");(e||f)&&"INPUT"===c&&(g="change"),h.initEvent(g,!0,!0),b.dispatchEvent(h)}}function j(a,b){$.ajax({type:"get",url:a,dataType:"html",success:function(a){b("success",a)},error:function(a){b("error")}})}return{log:d,error:e,cid:f,nodeError:g,tplError:h,loadTpl:j,triggerInput:i}}),define("js/FlightNumber",["../js/Common"],function(a,b,c){function d(a,b){if(this.id=h.cid("FlightNum"),this.elem=a,this.$elem=$(a),this.isShow=!1,this.opts=$.extend(!0,{},g,b),!this.opts.hiddenName1)throw new Error("适用航班隐藏域ID需要配置");if(this.opts.showGXHB&&!b.hiddenName2)throw new Error("适用共享航班隐藏域ID需要配置");this.$hiddenInput1=$(document.body).find("#"+b.hiddenName1),this.$hiddenInput2=$(document.body).find("#"+b.hiddenName2)}function e(a,b,c){return $("<input type='"+a+"' name='"+b+"' value='"+c+"'/>"+c+"</input>")}function f(a){return $("<label id='"+a+"'>")}var g={cbFn:function(){},showGXHB:!0},h=a("../js/Common");return d.prototype.init=function(){this.$container=$("<div class='flightNum-container'>"),this.$container.css("height",this.opts.showGXHB?60:40),this.$title=$("<div class='title'>"),this.$content=$("<div class='content'>");var a=String(Math.random()).replace(/\D/g,"");this.$container.append(f("all").append(e("radio","radioContent"+a,"全部适用"))),this.$container.append(f("sy").append(e("radio","radioContent"+a,"适用"))),this.$container.append(f("bsy").append(e("radio","radioContent"+a,"不适用"))),this.$footer=$("<div class='footer'>"),this.opts.showGXHB&&this.$footer.append(f("sygxhb").append(e("checkbox","chk","适用共享航班"))),this.$container.append(this.$title).append(this.$content).append(this.$footer),$(document.body).append(this.$container),this.bindEvent(),this.writeValue()},d.prototype.bindEvent=function(){var a=this;$(document).on("click.FlightNum",function(b){b.target!==a.elem&&a.hide()}),this.$container.find("input").on("click.FlightNum",$.proxy(this.operateHandler,this)),this.$container.on("click.FlightNum",function(a){a.stopPropagation()}),this.$elem.on("keyup.FlightNum",$.proxy(this.upperCaseHandler,this))},d.prototype.operateHandler=function(a){var b=this,c=a.target;if(this.$elem.removeClass("placeholder"),$(c).is("label")||$(c).parent().is("label")){var d=$(c).is("input")?$(c).parent():$(c);if("all"===d.attr("id"))b.$elem.val("---"),b.$hiddenInput1.val("1"),b.$elem.removeClass("bsy").addClass("sy");else if("sy"===d.attr("id"))b.$elem.val(""),b.$hiddenInput1.val("1"),b.$elem.removeClass("bsy").addClass("sy");else if("bsy"===d.attr("id"))b.$elem.val(""),b.$hiddenInput1.val(0),b.$elem.removeClass("sy").addClass("bsy");else if(b.opts.showGXHB){var e=d.find("input").get(0).checked?1:0;b.$hiddenInput2.val(e)}}this.$elem.focus(),this.opts.cbFn(b.$elem.val(),b.$hiddenInput1.val(),b.$hiddenInput2.val())},d.prototype.upperCaseHandler=function(){this.$elem.val((this.elem.value||"").toUpperCase())},d.prototype.show=function(){this.isShow||(this.setPos(),this.$container.show(),this.isShow=!0)},d.prototype.hide=function(){this.isShow&&(this.$container.hide().css("left","-1000px"),this.isShow=!1)},d.prototype.setPos=function(){var a=this.$elem.offset(),b=$(document).outerWidth(),c=a.top+this.$elem.outerHeight(),d=a.left+this.$container.outerWidth()>b?a.left+this.$elem.outerWidth()-this.$container.outerWidth():a.left;this.$container.css({left:d,top:c})},d.prototype.destroy=function(){this.$container.off(".FlightNum"),$(document).off(".FlightNum"),this.$container.remove()},d.prototype.writeValue=function(){var a,b,c;a=this.$hiddenInput1.val(),b=this.$hiddenInput2.val(),"1"===a&&"---"===this.$elem.val()?c="all":"1"===a?c="sy":"0"===a&&(c="bsy"),c&&(this.$container.find("#"+c).find("input").get(0).checked=!0),this.opts.showGXHB&&(this.$container.find("#sygxhb").find("input").get(0).checked="1"===b)},d}),define("js/FlightSearch",[],function(a,b,c){function d(a,b,c){this.elem=a,this.$elem=$(a),this.opts=$.extend(!0,{},e,b),this.cbFn=c||$.noop,this.timerId=null,this.init()}var e={optData:{},title:"输入接机航班号，如CZ6143",simpleData:{flightNum:"hbh",cfcsmc:"cfcsmc",ddcsmc:"ddcsmc",cfjcmc:"qfjcmc",ddjcmc:"jljcmc",cfsj:"cftime",ddsj:"ddtime",cfhzl:"cfhzl",ddhzl:"ddhzl"}};d.prototype={init:function(){this.$container=$('<div class="vetech-userCar-container"></div>'),this.$container.append("<p>"+this.opts.title+'</p><p class="noValue">未能查询到相关航班</p><ul></ul>'),$(document.body).append(this.$container),this.$noVal=this.$container.find(".noValue"),this.$ul=this.$container.find("ul"),this.bindEvent()},loadData:function(a){var b=this,c=this.opts.sjId,d=this.opts.cfcity,e=this.opts.ddcity,f=$("#"+c).val()||"",g=this.opts.typeValue,h=$.extend({},this.opts.optData,{hbh:a.toUpperCase(),cfcity:d?d.toUpperCase():"",ddcity:e?e.toUpperCase():"",qfsj:f,pt:b.opts.pt});1===this.opts.type?this.data=g:$.ajax({type:"get",url:b.opts.dataUrl,data:h,dataType:"json",success:function(c){b.data=c.result,b.$ul.empty(),b.keySearchData=a,b.render()}})},render:function(){var a,b,c,d,e,f,g,h,i,j,k,l=this,m=this.opts.simpleData;if("array"!==$.type(this.data))throw new Error("数据格式错误");if(0===this.data.length)return l.hide(),void l.cbFn({});this.$noVal.hide(),this.$ul.empty();for(var n=0,o=this.data.length;n<o;n++)this.$li=$("<li></li>"),this.keySearchData&&(this.newkeySearchData=this.keySearchData,"*"===this.keySearchData.substr(0,1)&&(this.newkeySearchData=this.keySearchData.replace(/\*/,"\\*")),b=new RegExp(this.newkeySearchData,"ig"),c="<i>"+this.keySearchData.toUpperCase()+"</i>"),a=this.data[n][m.flightNum].replace(b,c),d=this.data[n][m.cfhzl]||"",e=this.data[n][m.ddhzl]||"",f=this.data[n][m.cfsj]||"",g=this.data[n][m.ddsj]||"",h=this.data[n][m.cfcsmc],i=this.data[n][m.ddcsmc],j=h.length>4&&h.indexOf("（")>0?h.slice(0,h.indexOf("（")):h,k=i.length>4&&i.indexOf("（")>0?i.slice(0,i.indexOf("（")):i,this.dl='<dl class="left"><dt><em title="{ctitle}">'+j+"</em><em>"+f+"</em></dt><dd>"+this.data[n][m.cfjcmc]+d+'</dd></dl><dl class="mid"><dt>'+a+'</dt><dd></dd></dl><dl class="right"><dt><em title="{dtitle}">'+k+"</em><em>"+g+"</em></dt><dd>"+this.data[n][m.ddjcmc]+e+"</dd></dl>",this.dl=this.dl.replace(/\{ctitle\}/g,h).replace(/\{dtitle\}/g,i),this.$dl=$(this.dl),this.$li.append(this.$dl),this.$li.data("data",this.data[n]),this.$ul.append(this.$li);this.$container.append(this.$ul)},bindEvent:function(){this.$container.on("mouseover","ul>li",$.proxy(this.itemMouseOver,this)),this.$container.on("click","ul>li",$.proxy(this.itemClick,this)),this.$container.on("mousedown",$.proxy(this.containerMouseDown,this)),this.$container.on("mouseup",$.proxy(this.containerMouseUp,this)),this.$container.on("click",$.proxy(this.stopEvent,this)),$(document).on("mousedown",$.proxy(this.bodyClick,this))},show:function(){this.containerPos(),this.$container.show()},hide:function(){this.$container.hide()},stopEvent:function(a){return!1},waitDo:function(a,b){var c=this;return this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),this.timerId=window.setTimeout(function(){a(),c.timerId=null},b),this.timerId},containerPos:function(){var a=this.$elem.offset(),b=this.$elem.outerHeight(!1);this.$container.css({width:this.opts.width,height:"auto",maxHeight:260}),this.$container.css("left",a.left+"px"),this.$container.css("top",a.top+b+"px")},itemClick:function(a){var b=$(a.currentTarget).data("data"),c=this.opts.simpleData.flightNum,d=b[c];this.stopEvent(a),this.$elem.val(d),this.hide(),this.cbFn(b)},itemMouseOver:function(a){$(a.currentTarget).addClass("active").siblings().removeClass("active")},containerMouseDown:function(a){return document.all&&!document.addEventListener&&this.$container[0].setCapture&&this.$container[0].setCapture(),!1},containerMouseUp:function(){this.$container[0].releaseCapture&&this.$container[0].releaseCapture()},bodyClick:function(a){a.target!==this.elem&&this.hide()}},c.exports=d}),define("js/Gjz",["../js/Common"],function(a,b,c){function d(a,b){this.id=i.cid("Gjz"),this.elem=a,this.$elem=h(a),this.$listContainers=[],this.opts=h.extend({},g,b),this.data=[],this.dataStore={},this.activeItems={},this.checked={keys:[],values:[],ezms:[]},this.isShow=!1,this.$hiddenInput=h("#"+this.opts.hiddenName),this.$hiddenInput2=h("#"+this.opts.hiddenName2);try{this.checked.keys=this.$hiddenInput.val().split(this.opts.splitStr)}catch(a){this.checked.keys=[]}}function e(a,b){for(var c=0,d=a.length;c<d;c++)if(b===a[c])return!0;return!1}function f(a,b){a&&"checkbox"===a.type&&(a.checked=b)}var g={width:158,level:4,splitStr:"/",filterIds:null,rootId:"---",pid:"0",fn1:null},h=window.jQuery,i=a("../js/Common");return d.prototype.load=function(a){var b=this;1===this.opts.type?(this.data=this.opts.typeValue,a.call(b,this.data)):h.ajax({type:"get",url:b.opts.typeValue,dataType:"json",success:function(c){b.data=c,a.call(b,b.data)}})},d.prototype.formartData=function(){var a=[],b=!1;this.$hiddenInput2&&this.$hiddenInput2.val()&&(this.$hiddenInput2.val()===this.opts.rootId?b=!0:a=this.$hiddenInput2.val().split(this.opts.splitStr));for(var c=this.opts.filterIds?this.opts.filterIds.split(this.opts.splitStr):[],d=0,f=this.data.length;d<f;d++){var g=this.data[d];h.inArray(g.id,c)>-1||(e(this.checked.keys,g.id)&&this.checked.values.push(g.name),g._dataIndex=d,b||h.inArray(g.by3,a)>-1?g._state=!0:g._state=!1,this.dataStore[g.level]||(this.dataStore[g.level]=[]),this.dataStore[g.level].push(g))}this.render(),this.writeValue()},d.prototype.writeValue=function(){e(this.checked.keys,this.opts.rootId)?(this.$elem.val("全球"),this.$hiddenInput.val(this.getRootId())):this.$elem.val(this.checked.values.join(this.opts.splitStr))},d.prototype.getRootId=function(){for(var a=0;a<this.data.length;a++)if(this.data[a].parid===this.opts.pid)return this.data[a].id},d.prototype.render=function(){for(var a=0;a<this.opts.level;a++){var b=h('<div class="vetech-gjz-list" level-index="'+(a+1)+'"></div>');b.css("width",this.opts.width),this.$listContainers.push(b),h(document.body).append(b)}this.createList(0,this.opts.pid,!1).bindEvent(0).setPos(this.$elem,0)},d.prototype.destroy=function(){if(!this.$listContainers.length)for(var a=0;a<this.$listContainers.length;a++)this.$listContainers[a].remove()},d.prototype.setValue=function(){function a(c,d,e,f){for(var g=c.getNextLevelDate(d,e),h=0;h<g.length;h++)if(g[h]._state)c.checked.keys.push(g[h].id),c.checked.values.push(g[h].name),c.checkedOpts.push(g[h]),"1"===g[h].isleaf?c.checked.ezms.push(g[h].by3):b(c,g[h].level+1,g[h].id);else{var i=d+1;i<c.opts.level&&a(c,i,g[h].id)}f&&f()}function b(a,c,d){for(var e=a.getNextLevelDate(c,d),f=0;f<e.length;f++){e[f]._state&&"1"===e[f].isleaf&&(a.checked.ezms.push(e[f].by3),a.checkedOpts.push(e[f]));var g=c+1;g<a.opts.level&&b(a,g,e[f].id)}}this.checked.keys.length=0,this.checked.values.length=0,this.checked.ezms.length=0,this.checkedOpts=[];var c=this;a(this,0,this.opts.pid,function(){1===c.checked.values.length&&e(c.checked.values,"全球")&&(c.checked.ezms=[c.opts.rootId]),c.$elem.val(c.checked.values.join(c.opts.splitStr)),c.$hiddenInput.val(c.checked.keys.join(c.opts.splitStr)),c.$hiddenInput2.val(c.checked.ezms.join(c.opts.splitStr)),c.opts.cbFn&&c.opts.cbFn(c.data,this.checkedOpts)})},d.prototype.setPos=function(a,b){var c=h(a).offset();return a===this.$elem?this.$listContainers[b].css({left:c.left,top:c.top+a.get(0).offsetHeight}):this.$listContainers[b].css({left:c.left+a.get(0).offsetWidth,top:c.top}),this},d.prototype.createList=function(a,b,c){var g=this.$listContainers[a],i=this.getNextLevelDate(a,b),j=this.checked.keys;g.data=i;for(var k=h("<ul></ul>"),l=0,m=i.length;l<m;l++){var n=h('<li data-index="'+i[l]._dataIndex+'"></li>'),o=h("<label></label>");n.append(o);var p=h('<input type="checkbox"/>'),q=h("<span>"+i[l].name+"</span>"),r=h('<img class="box" disabled="disabled" src="'+d.uncheckedUrl+'" />');if(o.append(p).append(q).append(p).append(r),"0"===i[l].isleaf&&parseInt(a)!==this.opts.level-1){var s=h('<img class="arrow" src="'+d.arrawUrl+'" />');o.append(s)}var t=!!e(j,i[l].id)||c;f(p.get(0),t),this.changeImgUrl(p),k.append(n)}return g.html("").append(k),this},d.prototype.bindEvent=function(a){var b=this.$listContainers[a],c=this;return b.find("li").each(function(){var b=h(this).find("input");b.on("change",h.proxy(c.itemClickHandler,c,a,b)),h(this).on("mouseover",h.proxy(c.itemActiveHandler,c,a,this))}),this.$elem.on("keydown",function(){return!1}),h(document.body).on("click",function(a){var b=a.target;a.target===c.elem||h(b).parents("div").hasClass("vetech-gjz-list")||c.hideContainer()}),this},d.prototype.itemClickHandler=function(a,b){this.changeImgUrl(b);var c=parseInt(a)+1,d=this.data[b.parents("li").attr("data-index")],e=b.get(0).checked;c<this.opts.level&&"0"===d.isleaf&&(this.updateNextList(c,e),this.updateAllChildrensState(c,d.id,e)),this.updatePNodeState(a,e)},d.prototype.changeImgUrl=function(a){var b=a.parents("li").attr("data-index");this.data[b]._state=a.get(0).checked;var c=a.get(0).checked?d.checkedUrl:d.uncheckedUrl;a.parent().find(".box").attr("src",c)},d.prototype.updateNextList=function(a,b){var c=this;this.$listContainers[a].find("input").each(function(){f(this,b),c.changeImgUrl(h(this))})},d.prototype.updateAllChildrensState=function(a,b,c){function d(a,b,c,e){for(var f=a.getNextLevelDate(b,c),g=0;g<f.length;g++){f[g]._state=e;var h=b+1;h<a.opts.level&&d(a,h,f[g].id,e)}}d(this,a,b,c)},d.prototype.updatePNodeState=function(a,b){var c;if(0!==a)if(b){var d=this.$listContainers[a].find("input").not("input:checked");if(0===d.length){var e=a-1;c=h(this.activeItems[e]).find("input"),f(c.get(0),b),this.changeImgUrl(c),this.updatePNodeState(e,b)}}else for(var g=0;g<a;g++)c=h(this.activeItems[g]).find("input"),f(c.get(0),b),this.changeImgUrl(c);this.setValue()},d.prototype.itemActiveHandler=function(a,b){a=parseInt(a),this.closeNextLists(a);var c=this.data[h(b).attr("data-index")];if(this.$listContainers[a].find("li").removeClass("active"),h(b).addClass("active"),this.activeItems[a]=b,a<this.opts.level-1&&"1"!==c.isleaf){var d=a+1,e=c.id,f=h(b).find("input").get(0).checked;this.createList(d,e,f).bindEvent(d).setPos(h(b),d).show(d)}return!1},d.prototype.closeNextLists=function(a){for(var b=a+1;b<this.opts.level;b++)this.hide(b)},d.prototype.show=function(a){this.$listContainers[a].show(),this.isShow=!0},d.prototype.hide=function(a){this.$listContainers[a]&&this.$listContainers[a].hide()},d.prototype.hideContainer=function(){for(var a=0;a<this.$listContainers.length;a++)this.$listContainers[a].hide();this.isShow=!1},d.prototype.getNextLevelDate=function(a,b){var c=this.dataStore[a];if(!c)return[];for(var d=[],e=0,f=c.length;e<f;e++)c[e].parid===b&&(d[d.length]=c[e]);return d},d.checkedUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABR0lEQVQ4T6VT3VGDQBD+vrsCPCswVqAOvksLqcBYQJBUEDsQje9SAiXEd5nECowViAXAOgc5PJBkMsobs7vfz963xD8/9ufNKjaoyjmEIYlzWxfBGkQGpR6Ki6TwZzoAJp9OAN4TMEPCBCgAmRXBInX1FsAOE3w+xJFINS4unzLbWwM0sqv3XcwOVCAfBE9qJUqdWjsNQB4lBG73sQvkDUqHqMqM4JU0VuycBZiuCZ7tAmiHyyohcV0vFvJSBIuwBjjOI+nL9P4bZm/Y1T6DR3YARGQJrceoyqVVNMTsq2wBfAsCSaH0zDJCq3iI+ZcFk0d3BOae7LQIFjfmNUqd5/5+uktcxYZluQF59AOCDYHR4GJFvkTrUfuM25f4e5AcS51GQeIr6SiwzJCJS2GbRL9pm8oYkNAGxi0MsMek073HdMgd9Hu+ASMdqhFDVly6AAAAAElFTkSuQmCC",d.uncheckedUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA+0lEQVQ4T62T3Y2DMAzHbcz7dYQboZHC8zHCjdAROgIblBG6QTsC95xIZoQboQNgfHKUoqoKDy3HQ0SM/fMffyAUHmbeTdP0VVXV3j7P8zzWdf3jnLs9u+OjwQJF5AQAZr+qagpAxB0AfNs7ER0fQQuAmfci0mWH3xVlnyLSE1HnnBsT3I6c+UxEh5LMgsrFNwFijGYwajHzsxpmNiWd9/6AOXtvl5LsNVtOesQYYyqO9/76IiDFYQihA4ChaZrhFUAIoQWAdjtg8y9sLuLmNv7LIGXI+6N8b9+9HnZX1QsR3UTEpvUDEa3vuLpMhXlvVTWtMyKORDSU9uQPB1G/Nds28bkAAAAASUVORK5CYII=",d.arrawUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA1klEQVQ4T53TMQ6CMBgF4L8GNxxcNCbAWTgCHcqMN/AIeAOPoKtM3oAj6A1MmASHOsrAMzWSoCktyERo/q+89JVR51kei90t9jfdb7Z39gVkBYgofzoul3wubcNqXQcQCLIhxu/Cz22IFmiHQJSWwt+aECPwGTRGGgIYIw0CTJFGAQoC4VSKIGrRUQCAB2gSVrF3Hg0AdKmnbvjbj0F/AMKhFEGiO04r0ICtq9jb93WhF1B5G8YiWxv1VX7ndSLJV9fRVVbHVDuz5K/LtMgK1f3Utmt3/QXLB3gRjd5nowAAAABJRU5ErkJggg==",d}),define("js/HSMult",["../js/Common"],function(a,b,c){function d(a,b){this.id=g.cid("vetech-cabin"),this.elem=a,this.$elem=f(a),this.opts=f.extend(!0,{},e,b),this.isShow=!1,this.checkedData={},this.$hiddenInput=f("#"+this.opts.hiddenName),this.data=[],this.init()}var e={width:380,height:null,hiddenName:null,content:"",autoClose:!1,defer:2e3,allCheck:"---",fn1:null,splitStr:"/",fn2:null,qDatas:{},ajaxOpts:{type:"get"},simpleData:{id:"id",name:"name"},pos:[]},f=window.jQuery,g=a("../js/Common");return d.prototype.init=function(){this.$container=f('<div class="vetech-cabin"></div>'),this.$container.css("width",this.opts.width),f(document.body).append(this.$container)},d.prototype.load=function(a){var b=this;1===this.opts.type?(this.data=this.opts.typeValue,a.call(this,this.data)):f.ajax(f.extend(!0,{type:"get",url:this.opts.typeValue,data:this.opts.qDatas,success:function(c){b.data=c,a.call(b,b.data)}},this.opts.ajaxOpts))},d.prototype.render=function(){if("array"!==f.type(this.data))throw new TypeError("数据格式错误，需要[object Array]格式");this.$container.html("");var a=f('<dl class="clearfix"></dl>'),b=f("<dd></dd>");b.css("width","100%");var c=f('<ul class="clearfix"></ul>');b.append(c),a.append(b);for(var d=this.opts.simpleData.name,e=0,g=this.data.length;e<g;e++){var h=this.data[e],i=f('<li><label class="item no-publish-seat">'+(this.opts.fn2?this.opts.fn2(h):h[d])+"</label></li>");i.data("data",h),c.append(i)}this.$container.append(a),this.data.length&&this.addToolbar()},d.prototype.addToolbar=function(){this.$toolbar=f('<dl class="clearfix toolbar"></dl>'),this.$toolbar.append('<dt style="width:100%;"><label class="checked-all-btn">全选</label></dt>'),this.$container.append(this.$toolbar),this.bindEvent()},d.prototype.show=function(){this.elem.readOnly||this.isShow||(this.setPos(),this.isShow=!0,this.$container.css("visibility","visible"))},d.prototype.hide=function(){this.isShow&&(this.$container.css({visibility:"hidden",left:-1e3,top:-1e3}),this.isShow=!1)},d.prototype.setPos=function(){var a=this.$elem.offset(),b=f(document).outerWidth(),c=a.top+this.$elem.outerHeight(),d=a.left+this.$container.outerWidth()>b?a.left+this.$elem.outerWidth()-this.$container.outerWidth():a.left;this.$container.css({left:d,top:c})},
d.prototype.writeValue=function(){var a=(this.$hiddenInput.val()||"").split(this.opts.splitStr),b=[],c=[],d=this.opts.simpleData.id,e=this.opts.simpleData.name;this.$container.find(".item").each(function(g,h){var i=f(h).parent().data("data");f.inArray(i[d],a)>-1&&(f(h).addClass("active"),b.push(i),c.push(i[e]))}),this.$elem.val(c.join(this.opts.splitStr)),this.opts.cbFn(b)},d.prototype.checkedAll=function(a){var b=f(a.target);b.hasClass("active")?(b.removeClass("active"),this.$container.find("label").removeClass("active")):(b.addClass("active"),this.$container.find("label").addClass("active")),this.setValue()},d.prototype.bindEvent=function(){var a=this;this.$container.on("click.HSMult",".checked-all-btn",f.proxy(this.checkedAll,this)),this.$container.on("click.HSMult",".item",f.proxy(this.itemClick,this)),f(document).on("click.HSMult",function(b){b.target!==a.elem&&a.hide()}),this.$container.on("click.HSMult",function(){return!1})},d.prototype.destroy=function(){this.$container.off(".HSMult"),this.$container.remove(),f(document).off(".HSMult")},d.prototype.setValue=function(){var a=[],b=[],c=[],d=this.opts.simpleData.id,e=this.opts.simpleData.name;this.$container.find(".item").each(function(g,h){if(f(h).hasClass("active")){var i=f(h).parent().data("data");a.push(i),b.push(i[e]),c.push(i[d])}}),this.$elem.val(b.join(this.opts.splitStr)),this.$hiddenInput.val(c.join(this.opts.splitStr)),this.opts.cbFn(a)},d.prototype.itemClick=function(a){var b=f(a.target);if(b.hasClass("active"))b.removeClass("active"),this.$container.find(".checked-all-btn").removeClass("active");else{b.addClass("active");var c=!0;this.$container.find(".item").each(function(){if(!f(this).hasClass("active"))return c=!1,!1}),c&&this.$container.find(".checked-all-btn").addClass("active")}this.setValue()},d}),define("js/HotelHotCircle",["../js/Pulldown","./Common","../js/Common"],function(a,b,c){function d(a,b){if(this.elem=a,this.$elem=$(a),this.pullDown=null,this.$xzqSqAddressContainer=null,this.$elem.length<=0)throw new Error("DOM绑定错误【请查看页面是否渲染完毕，或者是否存在该DOM对象】");this.opts=$.extend(!0,{},g,b),this.tplCache=null,this.init()}var e=(a("../js/Pulldown"),a("../js/Common")),f=window.layui?window.layui.laytpl:window.laytpl,g={serviceUrl:"/cdsbase/kj/cds/hotel/getHotelDistrict",tplUrl:"/plugins/components/tpl/hotelHotCircleTpl.html",pt:"asms",pulldown:!0,csbh:null,hiddenName:"",simpleData:{id:"id",name:"name"},type:2,cbFn:null};d.prototype.init=function(){this.data=null,this.bindInputEvent(),this.$elem.data("hotelHotCircle",this)},d.prototype.bindInputEvent=function(){},d.prototype.clickEvent=function(a){this.render()},d.prototype.load=function(a){var b=$("#"+this.opts.csbh).val(),c=this,d=Math.floor(1e3*Math.random());if(!b)return this;$.ajax({type:"get",url:this.opts.serviceUrl,data:{pt:this.opts.pt,bh:b,_mid:d},success:function(b){c.data=b,$.isFunction(a)&&a.call(c,b)},error:function(a,b,c){console.log(a)}})},d.prototype.render=function(){},d.prototype.show=function(){var a=this;null==this.tplCache?e.loadTpl(this.opts.tplUrl,function(b,c){"error"===b&&e.tplError(),a.tplCache=c,a.buildControl(c,a.data)}):this.buildControl(this.tplCache,a.data)},d.prototype.buildControl=function(a,b){var c=f(a).render(b);this.destroy(),this.$xzqSqAddressContainer=$($.trim(c)),this.bindEvent(),this.display()},d.prototype.destroy=function(){this.$xzqSqAddressContainer&&(this.$xzqSqAddressContainer.off(".xzqSqAddressComponent"),$(document).off(".xzqSqAddressComponent"),this.$xzqSqAddressContainer.remove(),this.$xzqSqAddressContainer=null,this.$elem.removeData("hotelHotCircle"))},d.prototype.bindEvent=function(){this.$xzqSqAddressContainer.on("click.xzqSqAddressComponent",".header li",$.proxy(this.switchTabHandler,this)),this.$xzqSqAddressContainer.on("click.xzqSqAddressComponent",".second_tab li",$.proxy(this.switchSecondTabHandler,this)),this.$xzqSqAddressContainer.on("click.xzqSqAddressComponent",".content ul:not(.second_tab) li",$.proxy(this.itemClickHandler,this)),this.$xzqSqAddressContainer.on("click.xzqSqAddressComponent",".header .close",$.proxy(this.closeHandler,this)),$(document).on("mousedown.xzqSqAddressComponent",$.proxy(this.closeHandler,this)),this.$xzqSqAddressContainer.on("mousedown.xzqSqAddressComponent",function(){return!1})},d.prototype.switchTabHandler=function(a){var b=$(a.target),c=b.attr("data-index");b.parent().find("li").removeClass("active").end().end().addClass("active"),this.$xzqSqAddressContainer.find(".content .tab-page").removeClass("active").eq(c).addClass("active")},d.prototype.switchSecondTabHandler=function(a){var b=$(a.currentTarget),c=b.attr("data-index");b.parent().find("li").removeClass("active").end().end().addClass("active");var d=b.parent().parent();d.find("ul:gt(0)").hide().eq(c).show(),"0"===d.attr("page-index")&&d.find("ul:gt(0)").eq(c).find("li:first").addClass("active")},d.prototype.itemClickHandler=function(a){try{var b=$(a.currentTarget).attr("data-data");b=JSON.parse(b),this.setValue(b),"function"==typeof this.opts.cbFn&&this.opts.cbFn(b,$(this.elem)),this.destroy()}catch(a){throw new Error("数据格式错误"+a)}},d.prototype.closeHandler=function(a){var b=a.target;if(this.$elem[0]!==b){try{var c=this.$xzqSqAddressContainer.find(".content .tab-page.active"),d=c.find(".second_tab li.active").attr("data-index");if(c.size()<=0||!$.isNumeric(d))return void this.destroy();d=parseInt(d,10);var e=c.find("ul").eq(d+1).find("li.active").data("data-data");e=JSON.parse(e),e&&!$.isEmptyObject(e)&&(this.setValue(e),"function"==typeof this.opts.cbFn&&this.opts.cbFn(e,$(this.elem)))}catch(a){}this.destroy()}},d.prototype.markKeyword=function(a,b){var c=new RegExp(a,"g");return b.replace(c,"<i style='color:red;font-style: normal;'>"+a+"</i>")},d.prototype.display=function(){this.setPos(),$(document.body).append(this.$xzqSqAddressContainer),this.$xzqSqAddressContainer.css("visibility","visible")},d.prototype.hide=function(){this.destroy()},d.prototype.setPos=function(){var a=$(this.elem).offset();this.$xzqSqAddressContainer&&this.$xzqSqAddressContainer.css({left:a.left,top:a.top+$(this.elem).outerHeight()})},d.prototype.isBlank=function(a){return null==a||""===$.trim(a)},d.prototype.setValue=function(a){if("object"==typeof a&&null!=a){var b=this.opts.simpleData;this.$elem.val(a[b.name]),$("#"+this.opts.hiddenName).val(a[b.id])}},c.exports=d}),define("js/InputNumber",["../js/Common"],function(a,b,c){function d(a,b){this.id=e.cid("InputNumber"),this.elem=a,this.$elem=$(a),this.opts=$.extend({},f,b),this.data=this.opts.data,this.cbFn=this.opts.cbFn||$.noop,this.maxNum=parseInt(this.opts.maxNum,10),this.minNum=parseInt(this.opts.minNum,10),this.numSize=parseInt(this.opts.numSize,10)}var e=a("../js/Common"),f={maxNum:50,minNum:0,defaultNum:0,numSize:1},g=d.prototype;return g.init=function(){this.$container=$('<div class="vetech-inputnumer"></div>'),this.$input=$('<input type="text" class="ve-number" value="'+this.opts.defaultNum+'"/>'),this.$button=$('<div class="ve-button"><button type="button" class="iconfont">&#xe605;</button><button type="button" class="iconfont">&#xe601;</button></div>'),this.$container.append(this.$input).append(this.$button),this.show(),this.bindEvent()},g.show=function(){var a=this.$elem.css("margin"),b=this.$elem.width(),c=this.$elem.height();this.$container.css({width:b-2,height:c,margin:a}),this.$elem.after(this.$container).remove(),this.$button.innerHeight(c),this.$input.innerWidth(b-this.$button.width()-5)},g.bindEvent=function(){var a=this;this.$button.on("click","button:first",function(){var b=parseInt(a.$input.val()||0,10);b<a.maxNum&&(b+=a.numSize),a.$input.val(b),a.cbFn(b)}),this.$button.on("click","button:last",function(){var b=a.$input.val()||0;b>a.minNum&&(b-=a.numSize),a.$input.val(b),a.cbFn(b)}),this.$input.on("blur",function(){var b=a.$input.val();b?(b=parseInt(b,10),b>a.maxNum?b=a.maxNum:b<a.minNum&&(b=a.maxNum)):b="",a.$input.val(b),a.cbFn(b)}),this.$input.on("keyup",function(b){b=b||window.event;var c=b.keyCode;c>=48&&c<=57||8===c||46===c||(this.value=this.value.replace(/\D/g,"")),a.cbFn(this.value)})},d}),define("js/JCHZL",["../js/Common"],function(a,b,c){function d(a,b){this.id=f.cid("JCHZL"),this.elem=a,this.$elem=$(a),this.data={},this.opts=$.extend(!0,{},h,b),this.isShow=!1,this.tempData={},this.$hiddenInput=$("#"+this.opts.hiddenName),this.iNow=0}function e(a){this.id=f.cid("HZL"),this.opts=$.extend(!0,{},a),this.init()}var f=a("../js/Common"),g=window.layui?window.layui.laytpl:window.laytpl,h={type:1,typeValue:{},splitStr:",",itemWidth:55,tabWidth:60,rightWidth:100,mult:!1,title:"支持中文拼音/简拼/三字码的输入",hotSimpleData:{id:"nbbh",name:"hzlqm"},hzlOpts:{type:2,simpleData:{id:"nbbh",name:"hzlqm"},qDatas:{dldh:""},backContent:"点击返回城市列表",typeValue:"../data/hzl.json"},simpleData:{id:"bh",name:"name"},cbFn:function(){}};return d.prototype.load=function(a){if("function"!==$.type(a))throw new Error("参数配置错误");var b=this;1===this.opts.type?(this.data=this.opts.typeValue,delete this.opts.typeValue,a.call(b,this.data)):$.ajax({type:"get",url:this.opts.typeValue,data:this.opts.qDatas,dataType:"json",success:function(c){b.data=c,a.call(b,c)},error:function(a){f.error(a)}})},d.prototype.storeData=function(){for(var a=this.data,b=this.opts.simpleData.id,c=this.opts.hotSimpleData.id,d=0,e=a.length;d<e;d++)for(var f=0,g=a[d].groups.length;f<g;f++)for(var h=a[d].groups[f].items,i=0,j=h.length;i<j;i++){var k=h[i];this.tempData[k[c]||k[b]]=k}},d.prototype.init=function(a){var b=this;this.storeData();var c={title:this.opts.title,simpleData:this.opts.simpleData,hotSimpleData:this.opts.hotSimpleData,list:this.data};f.loadTpl(window.CTPL.JCHZL,function(d,e){"error"===d&&f.tplError(),g(e).render(c,function(c){b.$container=$(c),$(document.body).append(b.$container),b.setWidth(),b.bindEvent(),b.tabClick(b.$container.find(".tab").eq(b.iNow).find("a")),a&&a.call(b)})})},d.prototype.setWidth=function(){var a=this.$container.find(".tab-header").find("li");a.css("width",this.opts.tabWidth),this.$container.width(a.length*this.opts.tabWidth+this.opts.rightWidth),this.$container.find(".tab-content").find("li").width(this.opts.itemWidth)},d.prototype.bindEvent=function(){var a=this;this.$container.on("click.JCHZL",".tab",function(b){a.tabClick($(b.target))}),this.$container.on("click.JCHZL",".item",$.proxy(this.itemClick,this)),this.$container.on("click.JCHZL",function(){return!1}),this.$container.on("click.JCHZL",".close",$.proxy(this.hide,this)),$(document).on("click.JCHZL",function(b){b.target!==a.elem&&a.hide()}),this.$container.on("click.JCHZL",".backBtn",function(){a.$container.find(".tab-content").eq(a.iNow).addClass("active"),a.hzl.hide()}),this.$container.on("click.jCHZL",".hzlItem",function(){var b=$(this).data("data");a.setValue(b,!0),a.opts.cbFn(b,!0),a.hide()})},d.prototype.tabClick=function(a){var b=this.$container.find(".tab"),c=this.$container.find(".tab-content"),d=a.data("index");b.find("a").removeClass("active"),c.removeClass("active"),b.eq(d).find("a").addClass("active"),c.eq(d).addClass("active"),this.iNow=d},d.prototype.itemClick=function(a){var b=a.target,c=$(b),d=b.id,e=this.tempData[d];c.is("a")&&(c.hasClass("hot")?(this.setValue(e,!0),this.opts.cbFn(e,!0),this.hide()):this.tabItemClick(e))},d.prototype.tabItemClick=function(a){var b=this;this.opts.hzlOpts.qDatas={dldh:a.dldh},this.opts.hzlOpts.cityData=a,this.hzl=new e(this.opts.hzlOpts),this.hzl.load(function(a){this.data=a.result,this.render(),b.$container.append(this.$container),b.$container.find(".tab-content").eq(b.iNow).removeClass("active").end().last().addClass("active")})},d.prototype.setValue=function(a,b){var c=b?this.opts.hotSimpleData.id:this.opts.simpleData.id,d=b?this.opts.hotSimpleData.name:this.opts.simpleData.name,e=[],f=[];if(this.opts.mult)for(var g in a)a.hasOwnProperty(g)&&(e.push(a[g][c]),f.push(a[g][d]));else e.push(a[c]),f.push(a[d]);this.$elem.val(f.join(this.opts.splitStr)),this.$hiddenInput.val(e.join(this.opts.splitStr))},d.prototype.show=function(){this.isShow||(this.setPos(),this.$container.show(),this.isShow=!0)},d.prototype.hide=function(){this.isShow&&(this.$container.hide(),this.isShow=!1)},d.prototype.setPos=function(){var a=this.$elem.offset();this.$container.css({left:a.left,top:a.top+this.$elem.outerHeight()})},d.prototype.destroy=function(){this.$container.off(".JCHZL"),$(document).off(".JCHZL"),this.$container.remove()},e.prototype={init:function(){this.$container=$("<div class='vetech-jchzl-container tab-content'>")},load:function(a){var b=this;$.ajax({url:this.opts.typeValue,type:"get",dataType:"json",data:this.opts.qDatas,success:function(c){b.data=c,a.call(b,b.data)},error:function(a){f.error(a)}})},render:function(){var a=this.data,b=this.opts.simpleData.id,c=this.opts.simpleData.name,d=$('<div class="city-header clearfix"><span>'+this.opts.cityData.dlmc+'</span><span class="backBtn">'+this.opts.backContent+"</span></div>");this.$container.append(d);for(var e=$('<ul class="clearfix"></ul>'),f=0,g=a.length;f<g;f++){var h=$('<li class="hzlItem" id="'+a[f][b]+'">'+a[f][c]+"</li>");h.data("data",a[f]),e.append(h)}this.$container.append(e)},show:function(){this.$container.show()},hide:function(){this.$container.remove()}},d}),define("js/LYCFD",["../js/Common"],function(a,b,c){function d(a,b){this.id=f.cid("LYCFD"),this.elem=a,this.$elem=$(a),this.opts=$.extend(!0,{},h,b),this.cbFn=this.opts.cbFn||$.noop(),this.isShow=!1,this.isComming=!1,this.loadShow=null}function e(a){var b=$.trim($(".searchTxt").val()),c=new RegExp(b,"g");return a.replace(c,"<i style='color:red;font-style: normal;'>"+b+"</i>")}var f=a("../js/Common"),g=window.layui.laytpl,h={simpleData:{id:"id",name:"name"},autoClose:!1,writeValue:[],renderFn:null,isAuto:!1,type:1,typeValue:"",pt:"ASMS",csbh:"",queryUrl:"/webcomponent/travel/kjcommtravel/searchTravelCity",maxNum:20,size:10,cbFn:function(){}},i=d.prototype;return i.load=function(a){if("function"!==$.type(a))throw new Error("参数配置错误");var b=this;1===this.opts.type?(this.data=this.opts.typeValue,delete this.opts.typeValue,a.call(b,this.data)):$.ajax({type:"get",url:this.opts.typeValue,data:this.opts.qDatas,dataType:"json",success:function(c){b.data=c,a.call(b,c)},error:function(a){f.error(a)}})},i.init=function(a){var b=this;f.loadTpl(b.opts.tplUrl,function(a,c){"error"===a&&f.tplError(),g(c).render(b.data,function(a){b.$mddContainer=$(a),$(document.body).append(b.$mddContainer),b.setWidth(),b.bindEvent(),b.show()})})},i.writeValue=function(){var a=this.opts.writeValue;if(a&&a.length>0){this.$mddContainer.find(".em-none").hide();for(var b=0,c=a.length;b<c;b++)this.addSpan(a[b])}},i.show=function(){this.isShow||(this.setPos(),$(document.body).append(this.$mddContainer),this.$mddContainer.show(),this.setWidth(),this.isShow=!0)},i.setPos=function(){var a=this.$elem.offset();this.$mddContainer.css({left:a.left,top:a.top+this.$elem.outerHeight()})},i.hide=function(){this.isShow&&(this.$mddContainer.hide(),this.isShow=!1)},i.setWidth=function(){var a=60*this.$mddContainer.find(".header li").length+50;this.$mddContainer.find(".search-container div").width(a-85),this.$mddContainer.find(".list-container").width(a-85),this.$mddContainer.width(a)},i.bindEvent=function(){var a=this;this.$mddContainer.on("keyup.mddComponent",".searchTxt",function(b){a.searchHandler($(this),b)}),this.$mddContainer.on("click.mddComponent",".header li",function(){a.switchTabHandler($(this))}),this.$mddContainer.on("click.mddComponent",".list-container li",function(){a.addCityHandler($(this))}),this.$mddContainer.on("click.mddComponent",".content li",function(){a.itemClickHandler($(this))}),this.$mddContainer.on("click.mddComponent",".choosedCity",function(){return a.choosedCityClickHandler($(this)),!1}),this.$mddContainer.on("keyup.mddComponent",".focusInput",function(b){a.choosedCityKeyHandler($(this),b)}),this.$mddContainer.on("click.mddComponent",".sureBtn",function(){a.sureHandler($(this))}),this.$mddContainer.on("click.mddComponent",".search-container div",function(){a.setFocus($(this))}),$(document).on("mousedown.mddComponent",function(){a.hide()}),this.$mddContainer.on("mousedown.mddComponent",function(){return!1}),this.opts.autoClose&&this.$mddContainer.on("mouseleave",function(){a.isComming=!1,a.hide()}),this.$mddContainer.on("mouseenter",function(){a.isComming=!0})},i.searchHandler=function(a,b){var c=this,d=this.$mddContainer.find(".searchTxt").val(),e=b.keyCode,f=c.$mddContainer.find(".list-container"),g=f.find(".active");if(8!==e||d)if(38===e){if(g.length){if(!g.prev("li").length)return;g.prev("li").addClass("active"),g.removeClass("active")}}else if(40===e)if(g.length){if(!g.next("li").length)return;g.next("li").addClass("active"),g.removeClass("active")}else f.find("li").eq(0).addClass("active");else if(13===e)f.find(".active").length>0&&this.addCityHandler(f.find(".active"));else{var h=c.calcInputWdith(d);$(a).css("width",h+20),this.$mddContainer.find(".tab-container").hide().end().find(".list-container").show(),$(a).data("isNull",!1),$.ajax({type:"get",url:c.opts.queryUrl,data:{pt:c.opts.pt,size:c.opts.size,qStr:d},dataType:"json",success:function(a){a="cfd"===c.opts.type?a.data||[]:c.formatData(a),c.renderList(a)}})}else $(a).data("isNull")?($(a).parents(".search-container").find(".choosedCity").last().remove(),this.warnMaxNum()):(this.$mddContainer.find(".tab-container").show().end().find(".list-container").hide(),$(a).data("isNull",!0))},i.renderList=function(a){for(var b=$(document.createDocumentFragment()),c=$.trim($(".searchTxt").val()),d=0,f=a.length;d<f;d++){var g=$("<li>"+e(a[d][this.opts.simpleData.name])+"</li>");this.opts.renderFn&&(g=this.opts.renderFn(a[d],c)),g.data("data",a[d]),b.append(g)}this.$mddContainer.find(".list-container").html("").append(b)},i.calcInputWdith=function(a){var b=$("<span style='left:-1000px;position:absolute'>"+a+"</span>");$(document.body).append(b);var c=b.width();return b.remove(),c},i.switchTabHandler=function(a){var b=$(a).data("index");$(a).parent().find("li").removeClass("active").end().end().addClass("active"),this.$mddContainer.find(".content div").removeClass("active").eq(b).addClass("active")},i.addCityHandler=function(a){this.$mddContainer.find(".tab-container").show().end().find(".list-container").hide();var b=$(a).data("data"),c=this.$mddContainer.find(".searchTxt"),d=b[this.opts.simpleData.id];this.$mddContainer.find(".search-container").find("#"+d).length?c.val("").focus():(this.warnMaxNum(),this.$mddContainer.find(".search-container").find("span").length<this.opts.maxNum&&this.addSpan(b)),c.css("width",20)},i.warnMaxNum=function(){var a=this;if(this.$mddContainer.find(".search-container").find("span").length<this.opts.maxNum)this.$mddContainer.find(".search-container div").css("border","1px solid #76b5f4").find("p").remove();else{if(this.$mddContainer.find(".search-container .searchTxt").val(""),this.$mddContainer.find(".search-container div").css("border","1px solid red"),0===this.$mddContainer.find(".choose-warn").length){var b=$("<p style='color:red' class='choose-warn'>您最多能选择"+this.opts.maxNum+"个地方</p>");this.$mddContainer.find(".search-container div").append(b)}setTimeout(function(){a.$mddContainer.find(".search-container div").css("border","1px solid #76b5f4").find("p").remove()},2e3)}},i.formatData=function(a){for(var b=[],c=0;c<a.length;c++){var d={};d[this.opts.simpleData.id]=a[c].BH,d[this.opts.simpleData.name]=a[c].MC,$.extend({},d,a[c]),b.push(d)}return b},i.addSpan=function(a){var b=this.$mddContainer.find(".search-container .searchTxt"),c=$("<span id='"+a[this.opts.simpleData.id]+"' class='choosedCity'>"+a[this.opts.simpleData.name]+";<input class='focusInput'/></span>");c.data("data",a),c.insertBefore(b),b.val("").focus()},i.itemClickHandler=function(a){try{var b=$(a).data("data"),c=b[this.opts.simpleData.id];this.$mddContainer.find(".search-container").find("#"+c).length||(this.warnMaxNum(),this.$mddContainer.find(".search-container").find("span").length<this.opts.maxNum&&this.addSpan(b)),this.$mddContainer.find(".em-none").hide()}catch(a){throw new Error("数据格式错误"+a)}},i.sureHandler=function(a){var b=[];this.$mddContainer.find(".choosedCity").each(function(){var a=$(this).data("data");b.push(a)}),this.cbFn&&this.cbFn(b),this.hide()},i.setFocus=function(a){this.$mddContainer.find(".em-none").hide(),$(a).find("input").focus()},i.choosedCityClickHandler=function(a){$(a).parent().find("span").removeClass("active").end().end().addClass("active"),$(a).find("input").focus()},i.choosedCityKeyHandler=function(a,b){8===b.keyCode&&($(a).parent().remove(),this.$mddContainer.find(".searchTxt").focus(),this.warnMaxNum())},d}),define("js/MultSelect",["../js/Common"],function(a,b,c){function d(a,b){this.id=f.cid("MultSelect"),this.elem=a,this.$elem=$(a),this.opts=$.extend(!0,{},e,b),this.isShow=!1,this.$hiddenInput=$("#"+this.opts.hiddenName),this.checked=null,this.init()}var e={width:null,height:120,type:1,typeValue:[],simpleData:{id:"id",name:"name",title:null},formatPostData:function(a){return a},ajaxOpts:{type:"get"},defaultValues:null,qDatas:{},hiddenName:"",splitStr:",",hasAllChecked:!1,usetype:"mult",disbale:!1,fn1:null,cbFn:function(){}},f=a("../js/Common");return d.prototype.init=function(){this.$elem.addClass("ve-arrow-down"),this.$container=$('<div class="mult-select">');var a=this.opts.width;a=a||this.$elem.outerWidth(),this.$container.css({width:a,height:this.opts.height})},d.prototype.load=function(a){var b=this;1===this.opts.type?(this.data=this.opts.typeValue,delete this.opts.typeValue,a.call(b,this.data)):$.ajax($.extend(!0,{type:"get",url:this.opts.typeValue,dataType:"json",data:this.opts.formatPostData(this.opts.qDatas),success:function(c){b.data=c,a.call(b,b.data)},error:function(a){throw new Error("数据加载错误"+a)}},this.opts.ajaxOpts))},d.prototype.render=function(){var a=this.opts.simpleData,b=this.opts.defaultValues,c="",d="";if(this.data.length){var e=this.$hiddenInput.val()||"";if(e=e.split(this.opts.splitStr),"mult"===this.opts.usetype&&this.opts.hasAllChecked){var f=$('<label class="allChecked checkbox" title="全选">全选<input type="checkbox"></label>');this.$container.append(f)}else if("radio"===this.opts.usetype&&this.opts.defaultValues){c=b[a.name],d=b[a.title];var g=$('<label class="item" title="'+d+'">'+c+"</label>");g.data("data",this.opts.defaultValues),this.$container.append(g)}for(var h=0,i=this.data.length;h<i;h++){c=this.opts.fn1?this.opts.fn1(this.data[h]):this.data[h][a.name],d=a.title?this.data[h][a.title]:c;var j=$('<label class="item" title="'+d+'">'+c+"</label>");"mult"===this.opts.usetype&&(j.addClass("checkbox").append('<input type="checkbox" value="'+this.data[h][a.id]+'">'),-1!==$.inArray(this.data[h][a.id],e)&&(j.find("input").get(0).checked=!0)),this.checked||"radio"!==this.opts.usetype||-1!==$.inArray(this.data[h][a.id],e)&&(this.checked=this.data[h]),j.data("data",this.data[h]),this.$container.append(j)}$(document.body).append(this.$container),this.bindEvent(),this.writeValue()}},d.prototype.show=function(){this.isShow||(this.$elem.removeClass("ve-arrow-down").addClass("ve-arrow-up"),this.setPos(),this.$container.css("visibility","visible"),this.isShow=!0)},d.prototype.hide=function(){this.isShow&&(this.$elem.removeClass("ve-arrow-up").addClass("ve-arrow-down"),this.$container.css({visibility:"hidden",left:-1e3,top:-1e3}),this.isShow=!1)},d.prototype.setPos=function(){var a=this.$elem.offset();this.$container.css({left:a.left,top:a.top+this.$elem.outerHeight()})},d.prototype.destroy=function(){this.$container.off(".multSelect"),this.$container.remove()},d.prototype.bindEvent=function(){var a=this;"mult"===this.opts.usetype?this.$container.on("change.multSelect",".item",$.proxy(this.setValue,this)):this.$container.on("click.multSelect",".item",function(){var b=$(this).data("data");a.setValue(b)}),this.opts.hasAllChecked&&this.$container.on("change.multSelect",".allChecked",function(){var b=$(this).find("input").get(0).checked;a.$container.find("input[type='checkbox']").each(function(a,c){c.checked=b}),a.setValue()}),this.$container.on("mousedown.multSelect",function(){return!1}),$(document).on("mousedown.multSelect",function(b){b.target!==a.elem&&a.hide()}),this.opts.disabled&&this.$elem.on("keydown.multSelect",function(){return!1})},d.prototype.setValue=function(a){var b=[],c=[],d=[],e=this.opts.simpleData;if("mult"===this.opts.usetype){var f=this.$container.find("input[type='checkbox']:checked"),g=0;f.each(function(a,f){var h=$(f).parents("label");if(h.hasClass("allChecked"))return!0;var i=h.data("data");b.push(i),c.push(i[e.id]),d.push(i[e.name]),g++});var h=this.$container.find(".allChecked");h.length&&(h.find("input").get(0).checked=g===this.$container.find("input[type='checkbox']").length-1)}else d.push(a[e.name]),c.push(a[e.id]),this.hide();this.$elem.val(d.join(this.opts.splitStr)),this.$hiddenInput.val(c.join(this.opts.splitStr)),this.opts.cbFn("mult"===this.opts.usetype?b:a)},d.prototype.writeValue=function(){this.checked&&(this.setValue(this.checked),delete this.checked)},d}),define("js/MultSelectAndSearch",["../js/Common"],function(a,b,c){function d(a,b){this.id=g.cid("MultSelectAndSearch"),this.elem=a,this.$elem=f(a),this.opts=f.extend(!0,e,b),this.checkedData=[],this.unCheckedData=[],this.$hiddenInput=f("#"+this.opts.hiddenName),this.init()}var e={simpleData:{id:"id",name:"name"},ajaxOpts:{},title1:"已选择的城市",title2:"未选择的城市",qDatas:{},hiddenName:"",splitStr:","},f=window.jQuery,g=a("../js/Common");return d.prototype.init=function(){this.$container=f('<div class="multSelectAndSearch">'),this.$searchContent=f('<div class="searchContent"><input type="text" class="searchTxt" placeholder="请输入检索"></div>');var a=f('<div class="content">');this.$leftConent=f('<div class="leftContent"><p>'+this.opts.title1+'</p><select multiple="multiple"></select></div>'),this.$centerContent=f('<div class="centerContent"></div>');var b=f('<input type="button" class="add" value="添加"/>'),c=f('<input type="button" class="addAll" value="全部添加"/>'),d=f('<input type="button" class="del" value="删除"/>'),e=f('<input type="button" class="delAll" value="全部删除"/>');this.$centerContent.append(b).append(c).append(d).append(e),this.$rightContent=f('<div class="leftContent"><p>'+this.opts.title2+'</p><select multiple="multiple"></select></div>'),a.append(this.$leftConent).append(this.$centerContent).append(this.$rightContent),this.$toolbarContent=f('<div class="toolbarContent"><input type="button" class="sureBtn" value="确认选择"><input type="button" class="closeBtn" value="关闭窗口"></div>'),this.$container.append(this.$searchContent).append(a).append(this.$toolbarContent),f(document.body).append(this.$container),this.bindEvent()},d.prototype.load=function(a){var b=this;if(1===this.opts.type){var c=f.extend(!0,{},this.opts.typeValue);this.checkedData=c.checked||[],this.unCheckedData=c.unChecked||[],a.call(b,c),this.opts.typeValue=null}else f.ajax(f.extend(!0,{type:"get",url:this.opts.typeValue,data:this.opts.qDatas,success:function(c){b.data=c||[],a.call(b,c)}},this.opts.ajaxOpts))},d.prototype.writeValue=function(){this.checkedData=[],this.unCheckedData=[];var a=this.$hiddenInput&&this.$hiddenInput.val()||"";if(a)for(var b,c=a.split(this.opts.splitStr),d=this.opts.simpleData.id,e=0,g=this.data.length;e<g;e++)b=this.data[e],f.inArray(b[d],c)>-1?this.checkedData.push(b):this.unCheckedData.push(b);else this.checkedData=[],this.unCheckedData=f.extend(!0,[],this.data);this.data=[]},d.prototype.render=function(){this.$searchContent.find(".searchTxt").val(""),this.rendered(this.$leftConent.find("select").empty(),this.checkedData),this.rendered(this.$rightContent.find("select").empty(),this.unCheckedData)},d.prototype.rendered=function(a,b){for(var c,d,e=this.opts.simpleData.id,g=this.opts.simpleData.name,h=this.opts.fn1,i="function"===f.type(h),j=0,k=b.length;j<k;j++)d=b[j],c=i?h(d):f('<option  title="'+d[g]+'" value="'+d[e]+'">'+d[g]+"</option>"),a.append(c)},d.prototype.bindEvent=function(){var a=this;this.$leftConent.on("dblclick.MultSelectAndSearch","option",function(b){a.revertData("checkedData",[f(b.target).val()]),a.render()}),this.$rightContent.on("dblclick.MultSelectAndSearch","option",function(b){a.revertData("unCheckedData",[f(b.target).val()]),a.render()}),this.$centerContent.on("click.MultSelectAndSearch",".add",function(){var b=a.$rightContent.find("select").val();a.revertData("unCheckedData",b),a.render()}).on("click.MultSelectAndSearch",".addAll",function(){a.checkedData=a.checkedData.concat(a.unCheckedData),a.unCheckedData=[],a.render()}).on("click.MultSelectAndSearch",".del",function(){var b=a.$leftConent.find("select").val();a.revertData("checkedData",b),a.render()}).on("click.MultSelectAndSearch",".delAll",function(){a.unCheckedData=a.unCheckedData.concat(a.checkedData),a.checkedData=[],a.render()}),f(document).on("click.MultSelectAndSearch",function(b){b.target!==a.elem&&a.hide()}),this.$container.on("click",function(){return!1}),this.$searchContent.on("keyup.MultSelectAndSearch",".searchTxt",f.proxy(this.filterHandler,this)),this.$toolbarContent.on("click.MultSelectAndSearch",".sureBtn",f.proxy(this.sureHandler,this)),this.$toolbarContent.on("click.MultSelectAndSearch",".closeBtn",f.proxy(this.closeHandler,this))},d.prototype.revertData=function(a,b){for(var c,d=[],e=[],g=this.opts.simpleData.id,h=0,i=this[a].length;h<i;h++)c=this[a][h],f.inArray(c[g],b)>-1?e.push(c):d.push(c);this[a]=d;var j="checkedData"===a?"unCheckedData":"checkedData";this[j]=this[j].concat(e)},d.prototype.show=function(){this.setPos(),this.$container.show()},d.prototype.setPos=function(){var a=this.$elem.offset();this.$container.css({left:a.left,top:a.top+this.$elem.outerHeight()+2})},d.prototype.hide=function(){this.$container.hide()},d.prototype.destroy=function(){this.$container.off(".MultSelectAndSearch"),this.$container.remove()},d.prototype.sureHandler=function(){for(var a,b=this.opts.simpleData.id,c=this.opts.simpleData.name,d=[],e=[],f=[],g=0,h=this.checkedData.length;g<h;g++)a=this.checkedData[g],e.push(a[b]),f.push(a[c]),d.push(a);this.$elem.val(f.join(this.opts.splitStr)),this.$hiddenInput.val(e.join(this.opts.splitStr)),this.hide(),this.opts.cbFn(d)},d.prototype.closeHandler=function(){this.hide()},d.prototype.filterHandler=function(){for(var a,b=this.$searchContent.find(".searchTxt").val(),c="function"===f.type(this.opts.filterFn),d=this.opts.filterFn,e=this.opts.simpleData.id,g=this.opts.simpleData.name,h=[],i=0,j=this.unCheckedData.length;i<j;i++)a=this.unCheckedData[i],c?d(a,b)&&h.push(a):(a[e].indexOf(b)>-1||a[g].indexOf(b)>-1)&&h.push(a);this.rendered(this.$rightContent.find("select").empty(),h)},d}),define("js/Popup",["../js/Common"],function(a,b,c){function d(a,b){this.id=e.cid("vetech-popup"),this.elem=a,this.$elem=$(a),this.opts=$.extend(!0,{},f,b),this.init(),this.isShow=!1}var e=a("../js/Common"),f={width:200,height:100,position:"down",arraw_down:"img/down.png",arraw_up:"img/up.png",triggerType:"mousemove",beforeDestroy:function(){return!0},setEvent:function(){},defer:100,createOnce:!0};return d.prototype.init=function(){this.$container=$('<div class="vetech-popup">');var a=$('<div class="content">');this.$container.append(a);var b=$("<img>");"down"===this.opts.position?(a.addClass("upContent"),b.addClass("arraw_up").attr("src",this.opts.arraw_up)):(a.addClass("downContent"),b.addClass("arraw_down").attr("src",this.opts.arraw_down)),b.css("left",(this.opts.width-20)/2),this.$container.append(b),this.$container.css({width:this.opts.width,height:this.opts.height}),$(document.body).append(this.$container),this.bindEvent()},d.prototype.addContent=function(a){this.$container.find(".content").append(a)},d.prototype.show=function(){this.isShow||(this.setPos(),this.$container.show(),this.isShow=!0)},d.prototype.hide=function(){this.isShow&&(this.$container.hide(),this.isShow=!1)},d.prototype.destroy=function(){"function"===$.type(this.opts.beforeDestroy)&&this.opts.beforeDestroy()&&($(document).off(".popup"),this.$elem.off(".popup"),this.$container.off(".popup"),this.$container.remove())},d.prototype.bindEvent=function(){var a=this
;a.timer=null,a.state=null,"click"===this.opts.triggerType&&(this.opts.defer=0),$(document).on(this.opts.triggerType+".popup",function(b){clearTimeout(a.timer);var c=b.target;c!==a.elem&&$(c).closest(".vetech-popup").get(0)!==a.$container.get(0)?(a.state="isClosing",a.timer=setTimeout(function(){"isClosing"===a.state&&(a.opts.createOnce?a.destroy():a.hide())},a.opts.defer)):a.state="open"}),this.opts.setEvent.call(this)},d.prototype.setPos=function(){var a=this.$elem.offset(),b=a.left+this.$elem.width()/2-this.opts.width/2;b=b<0?0:b,$(document.body).width()-b<this.opts.width&&(b=$(document.body).width()-this.opts.width);var c=a.top-this.opts.height+1;("down"===this.opts.position||c<0)&&(c=a.top+this.$elem.height()),this.$container.css({left:b,top:c})},d}),define("js/PriceCalender",["../js/Common"],function(a,b,c){function d(a,b){if(this.id=i.cid("PriceCalender"),this.opts=$.extend({},j,b),this.elem=a,this.$elem=$(a),this.cbFn=this.opts.cbFn||function(){},!$.type(this.opts.activeDate,"[object Date]"))throw new TypeError("activeDate需要Date类型");this.isShow=!1,this.init()}function e(a){var b=[];return b.push('<div class="switch-btn">'),b.push('<a class="prev-btn"></a>'),b.push('<a class="next-btn"></a>'),b.push('<div class="month">'),b.push("<span>"+a.getFullYear()+"年</span><span>"+(a.getMonth()+1)+"月</span>"),b.push("</div>"),b.push("</div>"),b.join("")}function f(){for(var a=$("<thead></thead>"),b=["日","一","二","三","四","五","六"],c=0;c<b.length;c++)a.append("<th>"+b[c]+"</th>");return a}function g(){for(var a=$("<tbody></tbody>"),b=null,c=0;c<42;c++)c%7==0&&(b=$("<tr></tr>"),a.append(b)),b.append('<td><a href="javascript:void(0)"></a></td>');return a}function h(a){var b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return c=c<10?"0"+c:c,d=d<10?"0"+d:d,b+"-"+c+"-"+d}var i=a("../js/Common"),j={usetype:"layer",activeDate:new Date,type:"2",formatPostData:function(a){return a},typeValue:""},k=d.prototype;return k.init=function(){this.$container=$('<div class="vetech-price-calendar clearfix"></div>'),this.$monethArea=$('<div class="month-area"></div>'),this.$daysArea=$('<div class="days-area"></div>'),this.$today=$('<div class="today"><a href="javascript:void(0)">回到今天</a></div>'),this.$switchBtn=$(e(this.opts.activeDate)),this.$monethArea.append(this.$today).append(this.$switchBtn);var a=$("<table></table>");a.append(f()),a.append(g()),this.$daysArea.append(a),this.$container.append(this.$monethArea).append(this.$daysArea),"layer"===this.opts.usetype?$(document.body).append(this.$container):(this.$elem.append(this.$container),this.show());var b=this.$daysArea.find("tbody").outerHeight();this.$switchBtn.css("height",b),this.initDays(this.opts.activeDate),this.bindEvent()},k.show=function(){this.isShow||(this.setPos(),this.$container.css({visibility:"visible",position:"absolute","z-index":1e3}),this.isShow=!0)},k.hide=function(){this.isShow&&(this.$container.css({visibility:"hidden"}),"layer"===this.opts.usetype&&this.$container.css({left:0,top:0}),this.isShow=!1)},k.setPos=function(){var a=this.$elem.offset(),b=$(document).outerWidth(),c=($(document).outerHeight(),0),d=a.top+this.$elem.outerHeight()+2;c=a.left+this.$container.outerWidth()>b?a.left+this.$elem.outerWidth()-this.$container.outerWidth():a.left,"layer"===this.opts.usetype&&this.$container.css({left:c,top:d})},k.bindEvent=function(){var a=this;this.$today.on("click",function(b){a.backToSomeDay(b,new Date,!0)}),this.$daysArea.find("td>a").on("click",function(){a.itemClickHandler($(this))}),this.$monethArea.find(".prev-btn").on("click",function(b){a.switchBtnHandler(b,-1)}),this.$monethArea.find(".next-btn").on("click",function(b){a.switchBtnHandler(b,1)}),"layer"===this.opts.usetype&&($(document).on("click",function(b){b.target!==a.elem&&a.hide()}),this.$container.on("click",function(){return!1})),this.$container.on("click","a",function(){return!1})},k.itemClickHandler=function(a){if(!a.hasClass("not-value")&&!a.hasClass("invalid")){this.setActive(a);var b=a.attr("data-date");$.isEmptyObject(this.cbFn)&&this.cbFn(b,a),"layer"===this.opts.usetype&&this.hide()}},k.switchBtnHandler=function(a,b){var c=this.$switchBtn.find(".month>span"),d=c.eq(0).text().replace("年",""),e=c.eq(1).text().replace("月","");return e=parseInt(e)+b-1,this.backToSomeDay(a,new Date(d,e,1),!1),!1},k.backToSomeDay=function(a,b,c){this.initDays(b),this.render();var d=this.$daysArea.find("a[data-date='"+h(b)+"']");return c&&this.setActive(d),!1},k.setActive=function(a){a.hasClass("invalid")||(this.$daysArea.find(".active").removeClass(),a.addClass("active"))},k.initDays=function(a){var b=a.getFullYear(),c=a.getMonth(),d=1,e=0,f=0;e=new Date(b,c,1).getDay(),f=new Date(b,c+1,0).getDate();var g=c+1;g=g<10?"0"+g:g,this.$daysArea.find("td>a").each(function(a,c){$(this).html("").removeClass(),a>=e&&d<=f?(d=d<10?"0"+d:d,$(this).attr("data-date",b+"-"+g+"-"+d),$(this).append('<span class="date">'+d+"</span>"),d++):$(this).addClass("not-value")}),this.$switchBtn.find(".month").find("span").eq(0).text(b+"年").end().eq(1).text(c+1+"月")},k.render=function(){var a=this;this.$daysArea.find("td>a").each(function(b){if(!$(this).hasClass("not-value")){var c=$(this).attr("data-date");$(this).addClass("invalid");for(var d=0;d<a.data.length;d++)if(a.data[d].lyrq===c)return $(this).removeClass("invalid"),$(this).append('<span class="price">￥'+a.data[d].pjCbj+"</span>"),$(this).data("price",a.data[d].pjCbj),void(h(a.opts.activeDate)===c&&$(this).addClass("active"))}})},k.load=function(a){if("function"!==$.type(a))throw new Error("参数配置错误");var b=this;1===this.opts.type?(this.data=this.opts.typeValue,delete this.opts.typeValue,a.call(b,this.data)):$.ajax($.extend(!0,{type:"get",url:this.opts.typeValue,dataType:"json",data:this.opts.formatPostData(this.opts.qDatas),success:function(c){b.data=c,a.call(b,b.data)},error:function(a){throw new Error("数据加载错误"+a)}},this.opts.ajaxOpts))},d}),define("js/ProvinceAndCity",[],function(a,b,c){function d(a,b,c){this.id="vetech-provinceAndCity-"+String(Math.random()).replace(/\D/g,""),this.elem=a,this.$elem=$(a),this.opts=$.extend(!0,{},h,b),this.callback=c||$.noop,this.$hiddenInput=$("#"+(this.opts.hiddenName||"")),this.init()}function e(a){var b=$('<span class="checkedItem ellipsis">'+a[this.opts.simpleData.name]+'<i class="close"></i></span>');return b.data("data",a),b}function f(a){return'<span class="item" id="'+a[this.opts.simpleData.id]+'"><i class="collapse"></i>'+a[this.opts.simpleData.name]+'<div class="detail"><i class="expand"></i><label class="ellipsis"><input type="checkbox" class="province"  value="'+a[this.opts.simpleData.id]+'" />'+a[this.opts.simpleData.name]+"</label></div></span>"}function g(a,b){$.each(a,function(a,c){c.checked=b})}var h={simpleData:{id:"id",name:"name"},splitStr:","};return d.prototype.init=function(){this.$container=$('<div class="vetech-provinceAndCity-container">'),this.$toolbar=$('<div class="toolbar"></div>'),this.$toolbar.append('<strong>选择地区</strong><input type="button" value="确定" />'),this.$checkedArea=$('<div class="checkedArea clear">'),this.$content=$('<div class="content clear">'),this.$cityPanel=$('<div class="cityPanel">'),this.$container.append(this.$toolbar).append(this.$checkedArea).append(this.$content),$(document.body).append(this.$container),this.addEvent(),this.bindEvent()},d.prototype.load=function(a,b){b=b&&"function"===$.type(b)?b:function(){};var c=this;"string"===$.type(a)?$.ajax({url:a,data:this.opts.qDatas,success:function(a){c.opts.data=a,b.call(c)}}):(this.opts.data=a,b.call(c))},d.prototype.render=function(){var a=this.opts.data||[],b=this;$.each(a,function(a,c){var d=$(f.call(b,c));d.data("citys",c.citys||[]),d.find(".province").data("data",c),b.$content.append(d)})},d.prototype.writeValue=function(){var a=this;if(this.$hiddenInput.length&&this.$hiddenInput.val()){var b=this.$hiddenInput.val();b=b.split(this.opts.splitStr);for(var c=[],d={},e=[],f=this.opts.simpleData.id,h=0,i=b.length;h<i;h++){var j=b[h];a:for(var k=0,l=this.opts.data.length;k<l;k++){var m=this.opts.data[k];if(j===m[f]){c.push(m),a.addCheckedItem.call(a,m,"province"),e.push(m[a.opts.simpleData.name]);break}for(var n=m.citys,o=0,p=n.length;o<p;o++){var q=n[o];if(j===q[f]){d[q.pid]=d[q.pid]||[],d[q.pid].push(q),a.addCheckedItem.call(a,q,"city"),e.push(q[a.opts.simpleData.name]);break a}}}}this.$elem.val(e.join(this.opts.splitStr)),$.each(c,function(b,c){var d=$("#"+c[a.opts.simpleData.id]),e=d.find(".province");d.css("color","orange"),g(e,!0),a.$container.trigger("choose.provinceAndCity",e)}),$.each(this.$container.find(".province"),function(b,c){var e=$(c),f=e.data("data"),g=e.parents(".item"),h=d[f[a.opts.simpleData.id]];h&&(g.data("checkedData",h),g.css("color","orange"))})}},d.prototype.bindEvent=function(){var a=this;this.$container.on("click.provinceAndCity","span.item",function(b){($(b.target).hasClass("item")||$(b.target).hasClass("collapse"))&&(a.$container.find(".detail").hide(),a.$container.trigger("expand.provinceAndCity",this))}).on("mouseleave.provinceAndCity","span.item",function(){a.$container.trigger("collapse.provinceAndCity",this)}).on("click.provinceAndCity","input[type='checkbox']",function(){a.$container.trigger("choose.provinceAndCity",this)}).on("click.provinceAndCity",".expand",function(){a.$container.trigger("collapse.provinceAndCity",$(this).parents(".item"))}),this.$checkedArea.on("click.provinceAndCity",".close",function(){a.$container.trigger("delete.provinceAndCity",$(this).parent())}),this.$toolbar.on("click.provinceAndCity","input",function(){a.$container.trigger("sure.provinceAndCity"),a.hide()})},d.prototype.addEvent=function(){var a=this;this.$container.on("expand.provinceAndCity",function(b,c){var d=$(c);if(d.find(".detail").show(),a.$cityPanel.html(""),$.each(d.data("citys"),function(b,c){var d=$('<label id="'+c[a.opts.simpleData.id]+'" class="ellipsis" title="'+c[a.opts.simpleData.name]+'"><input type="checkbox" />'+c[a.opts.simpleData.name]+"</label>");d.find("input").data("data",c),a.$cityPanel.append(d)}),d.find(".province").is(":checked")){var e=a.$cityPanel.find("input");g(e,!0),e.attr("disabled","disabled")}else{var f=d.data("checkedData")||[];$.each(f,function(b,c){g(a.$cityPanel.find("#"+c[a.opts.simpleData.id]).find("input"),!0)})}d.append(a.$cityPanel.show())}),this.$container.on("collapse.provinceAndCity",function(a,b){$(b).find(".detail").hide().end().find(".cityPanel").hide()}),this.$container.on("choose.provinceAndCity",function(b,c){var d,e=$(c).parents(".item"),f=$(c),h=f.data("data");if(f.hasClass("province"))f.is(":checked")?(d=a.$cityPanel.find("input"),g(d,!0),d.attr("disabled","disabled"),e.data("checkedData",[]),a.addCheckedItem.call(a,h,"province")):(d=a.$cityPanel.find("input"),g(d,!1),d.removeAttr("disabled"),$.each(a.$checkedArea.find(".checkedItem"),function(b,c){var d=$(c),e=d.data("data");h[a.opts.simpleData.id]===e[a.opts.simpleData.id]&&d.remove()}));else{var i=e.data("checkedData")||[];if(f.is(":checked"))i.push(h),a.addCheckedItem.call(a,h,"city");else{var j=i;i=[],$.each(j,function(b,c){h[a.opts.simpleData.id]!==c[a.opts.simpleData.id]?i.push(c):$.each(a.$checkedArea.find(".checkedItem"),function(b,d){var e=$(d),f=e.data("data");c[a.opts.simpleData.id]===f[a.opts.simpleData.id]&&e.remove()})})}e.data("checkedData",i)}}),this.$container.on("delete.provinceAndCity",function(b,c){var d=$(c).data("data");$.each(a.$container.find(".province"),function(b,c){var e=$(c),f=e.data("data");d[a.opts.simpleData.id]===f[a.opts.simpleData.id]&&(g(e,!1),a.$container.trigger("choose.provinceAndCity",c));var h=e.parents(".item"),i=[];$.each(h.data("checkedData")||[],function(b,c){c[a.opts.simpleData.id]!==d[a.opts.simpleData.id]&&i.push(c)}),h.data("checkedData",i)}),$(c).remove()}),this.$container.on("sure.provinceAndCity",function(){var b=[],c=[],d=[];$.each(a.$checkedArea.find(".checkedItem ")||[],function(e,f){var g=$(f).data("data");c.push(g[a.opts.simpleData.id]),d.push(g[a.opts.simpleData.name]),b.push(g)}),a.$elem.val(d.join(a.opts.splitStr)),a.$hiddenInput.length&&a.$hiddenInput.val(c.join(a.opts.splitStr)),a.callback(b)})},d.prototype.addCheckedItem=function(a,b){var c=!0;if("province"===b){var d=this.opts.simpleData.id;$.each(this.$checkedArea.find(".checkedItem"),function(b,e){var f=$(e),g=f.data("data");if(g.pid===a[d])f.remove();else if(g[d]===a[d])return c=!1,!1})}c&&this.$checkedArea.append(e.call(this,a))},d.prototype.show=function(){this.setPos(),this.$container.css("visibility","visible")},d.prototype.setPos=function(){var a=this.$elem.offset();this.$container.css({left:a.left,top:a.top+this.$elem.outerHeight()})},d.prototype.hide=function(){this.$container.css({visibility:"hidden",left:"-1000px",top:"-1000px"})},d.prototype.destroy=function(){this.clear(),this.$container.remove()},d.prototype.clear=function(){this.$container.off(".provinceAndCity"),this.$checkedArea.off(".provinceAndCity"),this.$toolbar.off(".provinceAndCity")},d}),define("js/Pulldown",["../js/Common"],function(a,b){function c(a,b){this.id=e.cid("Pulldown"),this.elem=a,this.$elem=$(a),this.$elem.attr("autocomplete","off"),this.opts=$.extend(!0,{},d,b),this.$hiddenInput=$(document.body).find("#"+this.opts.hiddenName),this.data=[],this.currentPage=1,this.totalNum=0,this.iNow=0,this.timer=null,this.ajax=null,this.isBindedEvent=!1,this.triggerType="key",this.init()}var d={width:200,height:200,simpleData:{id:"id",name:"name",count:"size",start:"current",totalNum:"totalNum",data:"data"},ajaxOpts:{type:"get"},formatPostData:function(a){return a},qDatas:{},filterFn:function(a){return 0},cbFn:function(){},title:"可输入拼音、汉字、三字码",type:1,typeValue:null,hiddenName:null,dataType:"static",qUrl:"",pageSize:10,inputExecCallback:!1,hiddenFilter:!0,autoSetValue:!0,_openFilter_:!0,_hasPage_:!0,defer:0,autoExecCallback:!1,filterData:[],fn1:null},e=a("../js/Common");return c.prototype.init=function(){this.$elem.addClass("ve-arrow-down"),this.$container=$('<div class="vetech-pulldown-container"></div>'),this.$container.css({visibility:"hidden",width:this.opts.width}),this.$title=$('<div class="title">'+this.opts.title+"</div>"),this.$content=$('<div class="content"></div>'),!this.opts._hasPage_&&this.opts.height&&this.$container.css({"max-height":this.opts.height,overflow:"auto"}),this.$container.append(this.$title).append(this.$content),$(document.body).append(this.$container)},c.prototype.load=function(a){"dynamic"===this.opts.dataType?this.loadDynamicData(a):this.formartData(this.opts.typeValue,a)},c.prototype.loadDynamicData=function(a){var b=$.trim(this.$elem.val()),c=this.$hiddenInput.val()||"",d=this,f=this.opts.simpleData;if(this.$elem.data("lastValue")===b&&"key"===this.triggerType)return void a.call(this,this.data);this.$elem.data("lastValue",b),this.ajax&&this.ajax.abort();var g={data:b,id:c};g[f.count]=this.opts.pageSize,g[f.start]=this.currentPage,this.ajax=$.ajax($.extend(!0,{type:"get",url:this.opts.typeValue,dataType:"json",data:this.opts.formatPostData($.extend(!0,{},g,this.opts.qDatas)),success:function(b){"200"===b.status?(d.data=b.result.records||b.result,d.totalNum=b.result.total):e.error(b.message),a.call(d,d.data)}},this.opts.ajaxOpts))},c.prototype.formartData=function(a,b){var c=this.opts.filterData;if("array"===$.type(c)&&c.length){for(var d=[],e=0,f=a.length;e<f;e++){var g=a[e];-1===$.inArray(g[this.opts.simpleData.id],c)&&d.push(g)}this.data=d,d=null}this.loadStaticData(),"function"===$.type(b)&&b.call(this,this.data)},c.prototype.writeValue=function(){if(this.$hiddenInput.val()){for(var a=null,b=0,c=this.data.length;b<c;b++)if(this.$hiddenInput.val()===this.data[b][this.opts.simpleData.id]){a=this.data[b];break}a&&(this.$elem.val(a[this.opts.simpleData.name]),this.opts.autoExecCallback&&this.opts.opts.cbFn(a))}},c.prototype.render=function(){this.iNow=0;for(var a=$("<ul></ul>"),b=this.opts.simpleData,c=0,d=this.data.length;c<d;c++){var e=this.data[c],f=this.opts.fn1?this.opts.fn1(e):"<span title='"+e[b.name]+"'>"+e[b.name]+"</span><span class='right' title='"+e.py+"'>"+e.py+"</span>",g=$('<li class="'+(0===c?"active":"")+'">'+f+"</li>");a.append(g),g.data("index",c),g.data("data",e)}this.$content.html("").append(a),this.opts._hasPage_&&!this.isBindedEvent&&(this.$toolbar=$('<div class="toolbar"></div>'),this.$prevBtn=$('<a class="prev" href="javascript:void(0)">上一页</a>'),this.$nextBtn=$('<a class="next" href="javascript:void(0)">下一页</a>'),this.$toolbar.empty().append(this.$prevBtn).append(this.$nextBtn),this.$container.append(this.$toolbar)),this.opts._hasPage_&&this.listenBtnState(),this.isBindedEvent||this.bindEvent()},c.prototype.listenBtnState=function(){this.currentPage<=1?(this.$prevBtn.isDisabled=!0,this.$prevBtn.addClass("disable")):(this.$prevBtn.isDisabled=!1,this.$prevBtn.removeClass("disable"));var a=Math.ceil(this.totalNum/this.opts.pageSize);this.currentPage>=a?(this.$nextBtn.isDisabled=!0,this.$nextBtn.addClass("disable")):(this.$nextBtn.isDisabled=!1,this.$nextBtn.removeClass("disable"))},c.prototype.setValue=function(a){var b=this.opts.simpleData.id,c=this.opts.simpleData.name;"object"===$.type(a)&&(this.$elem.val(a[c]||""),this.$hiddenInput.val(a[b]||""),this.currentPage=1,this.hide()),this.opts.cbFn&&this.opts.cbFn(a)},c.prototype.nextBtnHandler=function(a){this.$nextBtn.isDisabled||(this.currentPage=this.currentPage+1,this.triggerType="page",this.load(function(){this.render(),this.show()}))},c.prototype.prevBtnHandler=function(a){this.$prevBtn.isDisabled||(this.currentPage=this.currentPage-1,this.triggerType="page",this.load(function(){this.render(),this.show()}))},c.prototype.loadStaticData=function(){this.filterStaticData();var a=(this.currentPage-1)*this.opts.pageSize,b=this.data.slice(a,a+this.opts.pageSize);this.data=b},c.prototype.elemClickHandler=function(a){},c.prototype.slideHandler=function(a){if(0!==this.iNow||-1!==a){var b=this.$container.find("li");this.iNow===b.length-1&&1===a||(b.eq(this.iNow).removeClass("active"),this.iNow+=a,b.eq(this.iNow).addClass("active"))}},c.prototype.elemKeyUpHandler=function(a,b){var c=this;this.$hiddenInput.val(""),this.$elem.removeClass("placeholder"),this.data&&this.data.length?13===a.keyCode?this.setValue(this.$container.find("li").eq(this.iNow).data("data")):37===a.keyCode?this.opts._hasPage_&&this.prevBtnHandler(a):38===a.keyCode?this.slideHandler(-1):39===a.keyCode?this.opts._hasPage_&&this.nextBtnHandler(a):40===a.keyCode?this.slideHandler(1):(this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(function(){c.currentPage=1,c.triggerType="key",c.load(b)},this.opts.defer),this.opts.inputExecCallback&&this.opts.cbFn(this.$elem.val(),!0)):(this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(function(){c.load(b)},this.opts.defer),this.opts.inputExecCallback&&this.opts.cbFn(this.$elem.val(),!0))},c.prototype.bindEvent=function(){this.isBindedEvent=!0;var a=this;this.opts._hasPage_&&(this.$prevBtn.on("click.pulldown",function(b){a.prevBtnHandler.call(a,b)}),this.$nextBtn.on("click.pulldown",function(b){a.nextBtnHandler.call(a,b)})),this.$container.on("mouseenter.pulldown","li",function(){a.$container.find("li").eq(a.iNow).removeClass("active"),$(this).addClass("active"),a.iNow=$(this).data("index")}).on("mousedown.pulldown",function(){return document.all&&!document.addEventListener&&a.$container[0].setCapture&&a.$container[0].setCapture(),!1}).on("click.pulldown","li",function(){a.setValue($(this).data("data"))}).on("mouseup.pulldown",function(b){a.$container[0].releaseCapture&&a.$container[0].releaseCapture()}),this.$elem.on("blur.pulldown",function(){a.hide.call(a)}).on("click.pulldown",function(){$(this).val()&&$(this).select()})},c.prototype.destroy=function(){this.$container.off(".pulldown"),this.$elem.off(".pulldown"),this.$prevBtn&&this.$prevBtn.off(".pulldown"),this.$nextBtn&&this.$nextBtn.off(".pulldown"),this.$container.remove()},c.prototype.hide=function(){this.$elem.removeClass("ve-arrow-up").addClass("ve-arrow-down"),this.$container.css("visibility","hidden"),this.$elem.val()||this.$hiddenInput.val("")},c.prototype.setPos=function(){var a=this.$elem.offset(),b=$(document).outerWidth(),c=a.top+this.$elem.outerHeight(),d=a.left+this.$container.outerWidth()>b?a.left+this.$elem.outerWidth()-this.$container.outerWidth():a.left;this.$container.css({left:d,top:c})},c.prototype.show=function(){this.$elem.removeClass("ve-arrow-down").addClass("ve-arrow-up"),this.setPos(),this.$container.css("visibility","visible")},c.prototype.filterStaticData=function(){for(var a=$.trim(this.$elem.val()),b=[],c=this.opts.typeValue,d=0,e=c.length;d<e;d++){var f=c[d],g=this.opts.filterFn.call(this,f,a);-1!==g&&(f.sortIndex=g,b.push(f))}a&&b.sort(function(a,b){return a.sortIndex-b.sortIndex}),this.data=b,this.totalNum=this.data.length},c}),define("js/Refresh",["../js/Common"],function(a,b,c){function d(a,b){this.id=e.cid("Refresh"),this.elem=a,this.$elem=$(a),this.timer=null,this.state="start",this.opts=$.extend(!0,{},f,b),this.currTime=this.opts.totalTime,this.render()}var e=a("../js/Common"),f={totalTime:60,startTxt:"启",stopTxt:"停"};return d.prototype.render=function(){this.$container=$('<div class="refresh-container"><p>本页面将在</p>\n    <p><span class="clock">'+this.currTime+'</span>秒</p>\n    <p>后自动刷新</p>\n    <input type="button" value="'+this.opts.stopTxt+'">'),this.$elem.append(this.$container),this.init(),this.bindEvent()},d.prototype.init=function(){this.timer&&clearInterval(this.timer);var a=this;this.update(),this.timer=setInterval(function(){a.currTime--,a.update()},1e3)},d.prototype.start=function(){this.state="start",this.$container.find("input").val(this.opts.stopTxt),this.init()},d.prototype.stop=function(){clearInterval(this.timer),this.state="stop",this.$container.find("input").val(this.opts.startTxt)},d.prototype.update=function(){this.currTime<=0?(this.currTime=this.opts.totalTime,this.opts.cbFn&&this.opts.cbFn(),this.init()):this.$container.find(".clock").html(this.currTime)},d.prototype.reset=function(){this.state="start",this.currTime=this.opts.totalTime,this.$container.find("input").val(this.opts.stopTxt),this.init()},d.prototype.bindEvent=function(){var a=this;this.$container.on("click.Refresh","input",function(){"start"===a.state?a.stop():a.start()})},d.prototype.destroy=function(){this.off(".Refresh"),this.$container.remove()},d}),define("js/RouteTheme",["../js/Common"],function(a,b,c){function d(a,b,c){this.id=f.cid("RouteTheme"),this.opts=$.extend(!0,{},g,b),this.elem=a,this.$elem=$(a),this.cbFn=c||function(){},this.$hotThemes=[],this.$allThemes=[],this.$sameThemes=[],this.model=this.opts.model,this.isOpen=!1,this.checked={keys:[],values:[]},this.opts.hiddenName&&(this.$hiddenInput=$("#"+this.opts.hiddenName),this.checked.keys=(this.$hiddenInput.val()||"").split(this.opts.splitStr)),"function"!==$.type(this.opts.fn1)&&(this.opts.fn1=null),"function"!==$.type(this.opts.fn2)&&(this.opts.fn2=null),"function"!==$.type(this.opts.fn3)&&(this.opts.fn3=null),this.init()}function e(a,b){a&&"checkbox"===a.type&&(a.checked=b)}var f=a("../js/Common"),g={width:600,height:200,itemWidth:80,splitStr:",",classW:80,type:3,ajaxType:"get",typeValue:null,hiddenName:null,fn1:null,fn2:null,fn3:null,model:"single"};return d.prototype.init=function(){"group"===this.model&&(this.$hotElement=$('<div class="vetech-route-theme clearfix"></div>'),this.$hotContainer=$("<ul></ul>"),this.$hotElement.append(this.$hotContainer)),this.$layer=$('<div class="vetech-route-theme vrt-layer">'),this.$layer.css({width:this.opts.width,"min-height":this.opts.height}),$(document).find("body").append(this.$layer)},d.prototype.load=function(a){var b=this;1===this.opts.type?(this.data=this.opts.typeValue,delete this.opts.typeValue,a.call(b,this.data)):$.ajax({type:this.opts.ajaxType,url:this.opts.typeValue,dataType:"json",data:this.opts.qDatas,success:function(c){b.data=c,a.call(b,b.data)},error:function(a){throw new Error("数据加载错误"+a)}})},d.prototype.setPos=function(){var a=this.$elem.offset(),b=$(document).outerWidth(),c=a.top+this.$elem.outerHeight(),d=a.left+this.$layer.outerWidth()>b?a.left+this.$elem.outerWidth()-this.$layer.outerWidth():a.left;this.$layer.css({left:d,top:c})},d.prototype.render=function(){var a=[];if("group"===this.model){for(var b=this.data.hotTheme,c=this.opts.fn1,d=0,e=b.length;d<e;d++){var f=b[d],g=c?c(f):f.mc,h=$('<li><label title="'+f.mc+'"><input type="checkbox"/>'+g+"</label></li>");h.data=f,this.$hotThemes.push(h),this.$hotContainer.append(h),-1!==$.inArray(f.id,this.checked.keys)&&a.push(h)}this.$more=$('<li class="more"><a href="javascript:void(0);">更多</a></li>'),this.$hotContainer.append(this.$more),this.$elem.append(this.$hotElement)}for(var i=this.data,j=this.opts.width-this.opts.classW,k=this.opts.fn2,l=this.opts.fn3,m=0,n=i.length;m<n;m++){var o=i[m],p=$('<dl class="vetech-clearfix"></dl>'),q=k?k(o):o.mc,r=$('<dt class="vetech-inline" style="width:'+this.opts.classW+'px;">'+q+"</dt>"),s=$('<dd class="vetech-inline" style="width:'+j+'px;"></dd>');p.append(r).append(s);for(var t=$("<ul></ul>"),u=0,v=o.childs.length;u<v;u++){var w=o.childs[u],x=l?l(w):w.mc,y=$('<li><label title="'+w.mc+'"><input type="checkbox"/>'+x+"</label></li>");y.css("width",this.opts.itemWidth),y.data=w,this.isInHotThemes(w)?this.$sameThemes.push(y):this.$allThemes.push(y),-1!==$.inArray(w.bh,this.checked.keys)&&a.push(y),t.append(y)}s.append(t),this.$layer.append(p)}this.bindEvent(),this.writeValue(a)},d.prototype.writeValue=function(a){for(var b=[],c=0,d=a.length;c<d;c++){var f=a[c];b.push(f.data.mc),e(f.find("input[type='checkbox']").get(0),!0)}"single"===this.model&&this.$elem.val(b.join(this.opts.splitStr))},d.prototype.setValue=function(){function a(a){a.find("input[type='checkbox']").get(0).checked&&(b.push(a.data),c.checked.keys.push(a.data.bh),c.checked.values.push(a.data.mc))}var b=[],c=this;this.checked={keys:[],values:[]};for(var d=0,e=this.$hotThemes.length;d<e;d++){a(this.$hotThemes[d])}for(var f=0,g=this.$allThemes.length;f<g;f++){a(this.$allThemes[f])}this.$elem.val(c.checked.values.join(this.opts.splitStr)),this.$hiddenInput.val(c.checked.keys.join(this.opts.splitStr)),this.cbFn(b)},d.prototype.isInHotThemes=function(a){for(var b=null,c=0,d=this.$hotThemes.length;c<d;c++)if(b=this.$hotThemes[c].data,a.bh===b.bh&&$.trim(a.mc)===$.trim(b.mc))return!0;return!1},d.prototype.show=function(){this.setPos(),this.$layer.css("visibility","visible"),this.$more&&(this.$more.find("a").text("关闭"),this.isOpen=!0)},d.prototype.hide=function(){this.$layer.css("visibility","hidden"),this.$more&&(this.$more.find("a").text("更多"),this.isOpen=!1)},d.prototype.bindEvent=function(){var a=this;"group"===this.model?this.$more.on("click",function(){a.isOpen?a.hide():a.show()}):(this.$elem.on("click",$.proxy(a.show,a)),$(document).on("mousedown",function(b){var c=b.target;a.elem!==c&&a.hide()}),this.$layer.on("mousedown",function(){return!1}));for(var b=0,c=this.$hotThemes.length;b<c;b++)!function(b){b.find("input[type='checkbox']").on("change",function(c){a.mutexOperate(b,a.$sameThemes),c.stopPropagation()})}(this.$hotThemes[b]);for(var d=0,e=this.$allThemes.length;d<e;d++)!function(b){b.find("input[type='checkbox']").on("change",function(b){return a.setValue(),!1})}(this.$allThemes[d]);for(var f=0,g=this.$sameThemes.length;f<g;f++)!function(b){b.find("input[type='checkbox']").on("change",function(c){return a.mutexOperate(b,a.$hotThemes),!1})}(this.$sameThemes[b])},d.prototype.mutexOperate=function(a,b){for(var c=0,d=b.length;c<d;c++){var f=b[c].data;if(a.data.bh===f.bh){a.find("input[type='checkbox']").get(0).checked?(e(b[c].find("input[type='checkbox']").get(0),!0),this.setValue()):(e(b[c].find("input[type='checkbox']").get(0),!1),this.setValue());break}}},d}),define("js/SSQX",["../js/Common"],function(a,b,c){function d(a,b){this.id=f.cid("SSQX"),this.elem=a,this.$elem=$(a),this.opts=$.extend(!0,{},e,b),this.iNow=0,this.$hiddenInput=$("#"+this.opts.hiddenName),this.init()}var e={type:1,typeValue:{},splitStr:",",itemWidth:55,tabWidth:100,rightWidth:180,headers:["省份","城市","区县"],simpleData:{id:"bh",name:"name",pid:"pid"},pid:"00002",closeImg:"/img/clsoe.png",cbFn:function(){}},f=a("../js/Common");d.prototype.init=function(){this.$container=$('<div class="vetech-ssqx">');for(var a=$('<span class="close"> <img src="'+this.opts.closeImg+'"> </span>'),b=$('<div class="tab-header">'),c=this.opts.headers,d=$('<ul class="clearfix">'),e=[],f=0,g=c.length;f<g;f++){var h=$('<li class="tab"><a href="javascript:;" data-index="'+f+'">'+c[f]+"</a></li>");e.push('<div class="tab-content"></div>'),d.append(h)}b.append(d),this.$container.append(a).append(b).append(e.join("")),this.tabClick(b.find("li").first()),this.bindEvent()},d.prototype.load=function(a){var b=this;if(1===this.opts.type)this.data=this.opts.typeValue,a.call(this,this.data);else{var c=this.opts.qDatas;c[this.opts.simpleData.pid]=this.opts.pid,$.ajax({type:"get",url:this.opts.typeValue,data:c,success:function(c){"200"===c.status?b.data=c.result.records:f.error(c.message),a.call(b,b.data)},error:function(a){f.error(a)}})}},d.prototype.render=function(){if(this.data.length){for(var a=$('<ul class="clearfix">'),b=0,c=this.data.length;b<c;b++){var d=this.data[b],e=$('<li class="item"><a href="javascript:;" title="'+d[this.opts.simpleData.name]+'">'+d[this.opts.simpleData.name]+"</a>");e.data("data",d),a.appendChild(e)}this.$container.find(".tab-content").eq(this.iNow).html(a)}},d.prototype.tabClick=function(a){var b=a.data("index");this.iNow=parseInt(b),this.$container.find(".tab").find("a").removeClass("active").end().eq(b).find("a").addClass("active"),this.$container.find(".tab-content").removeClass("active").eq(b).addClass("active")},d.prototype.itemClick=function(a){if(a.find("a").hasClass("active"))a.parents(".tab-content").nextAll(".tab-content").empty(),a.find("a").removeClass("active");else{a.find("a").addClass("active");var b=a.data("data");this.opts.pid=b[this.opts.simpleData.pid],this.iNow<this.opts.headers.length-1&&(this.iNow=this.iNow+1,this.tabClick(this.$container.find(".tab").eq(this.iNow)),this.load(function(){this.render()})),this.setValue()}},d.prototype.setValue=function(){var a=[],b=[],c=[],d=this.opts.simpleData;this.$container.find(".tab-content").find("a").each(function(e,f){if($(f).hasClass("active")){var g=$(f).parent().data("data");a.push(g),b.push(d.name),c.push(d.id)}}),this.$elem.val(b.join(this.opts.splitStr)),this.$hiddenInput.length&&this.$hiddenInput.val(c.join(this.opts.splitStr)),this.opts.cbFn(a),a=null,b=null,c=null},d.prototype.bindEvent=function(){var a=this;this.$container.on("mousedown.ssqx",function(){return!1}).on("click",".close",function(){a.hide()}).on("click",".tab",function(){a.tabClick($(this))}).on("click",".item",function(){a.itemClick($(this))}),$(document).on("mousedown.ssqx",function(b){b.target!==a.elem&&a.hide()})},d.prototype.show=function(){this.isShow||(this.setPos(),this.$container.show(),this.isShow=!0)},d.prototype.hide=function(){this.isShow&&(this.$container.hide(),this.isShow=!1)},d.prototype.setPos=function(){var a=this.$elem.offset();this.$container.css({left:a.left,top:a.top+this.$elem.outerHeight()})},d.prototype.destroy=function(){this.$container.off(".ssqx"),this.$container.remove()}}),define("js/SelectPeople",["../js/Common"],function(a,b,c){function d(a,b,c){this.id=e.cid("CallCenter"),this.elem=a,this.$elem=$(a),this.opts=$.extend({},f,b),this.data=this.opts.data,this.cbFn=c||$.noop,this.isShow=!1,this.people=2,this.child=0,this.year=[],this.$hiddenPeople=$("#"+this.opts.hiddenPeople),this.$hiddenChild=$("#"+this.opts.hiddenChild),this.$hiddenYear=$("#"+this.opts.hiddenYear),this.init()}var e=a("../js/Common"),f={hiddenPeople:null,hiddenChild:null,hiddenYear:null,qxCbFn:function(){},data:{people:"5",child:"3",year:"17"}},g=d.prototype;return g.init=function(){this.$container=$('<div class="vetech-xzperson-container" style="z-index:999"></div>'),this.$navbox=$('<div class="navbox"></div>'),this.$sortbox=$('<div class="sortbox"></div>'),
this.$childContent=$('<div class="xzperson-group clearfix"></div>'),this.$container.append(this.$navbox),this.$container.append(this.$sortbox),$(document.body).append(this.$container),this.renderData()},g.renderData=function(){var a=parseInt(this.data.people,10),b=parseInt(this.data.child,10);if(a>0){for(var c=$("<ul></ul>"),d=1;d<a+1;d++){var e={people:d,child:"0",year:[]},f=$("<li title="+d+"成人+0儿童/间><span>"+d+"</span>成人+0儿童/间</li>");f.data("liData",e),c.append(f)}var g=$('<a class="xzperson-more" href="javascript:;">更多选择》</a>');this.$navbox.append(c),this.$navbox.append(g);this.$sortbox.append('<div class="xzperson-group clearfix"><label>每间入住</label><div class="group-right"><div class="xzperson-input"><input type="text" id="peoplenum" value="2成人" data="2" readonly></div><div class="xzperson-input"><input type="text" id="childnum" value="0儿童" data="0" readonly></div></div></div><div class="group-foot"><a class="xzperson-more" href="javascript:;">《常用选择 </a><div class="foot-btn"><button class="btn-sure">确定</button><button class="btn-cancle">取消</button></div></div>'),this.createSelectNum("peoplenum",a),this.createSelectNum("childnum",b),this.bindEvent()}},g.bindEvent=function(a){var b=this;this.$navbox.find("ul li").on("click",function(){b.liClickhandler($(this))}),this.$container.find(".xzperson-more").on("click",function(){b.moreClickhandler()}),this.$sortbox.find(".xzperson-input input").on("click",function(){return b.$sortbox.find(".select-nav").hide(),$(this).siblings(".select-nav").show(),!1}),this.$sortbox.find(".xzperson-input .select-nav li").on("click",function(){b.setValuehandler($(this))}),this.$sortbox.find(".btn-sure").on("click",function(){b.year=[],b.people=b.$sortbox.find("#peoplenum").attr("data"),b.child=b.$sortbox.find("#childnum").attr("data");var a=b.$childContent.find(".xzperson-input").length;if(a>0)for(var c=0;c<a;c++)b.year.push(b.$childContent.find(".xzperson-input").eq(c).find("input").attr("data"));else b.year=[];b.$elem.val(b.people+"成人+"+b.child+"儿童/间"),b.$hiddenPeople.val(b.people),b.$hiddenChild.val(b.child),b.$hiddenYear.val(b.year);var d={people:b.people,child:b.child,year:b.year};b.cbFn&&b.cbFn(d),b.hide()}),this.$sortbox.find(".btn-cancle").on("click",function(){b.opts.qxCbFn.call(b),b.hide()}),$(document).on("click",function(a){var c=a||window.event,d=c.target;b.elem!==d&&b.hide()}),this.$container.on("click",function(){return!1}),this.$sortbox.on("click",function(){$(this).find(".select-nav").hide()})},g.moreClickhandler=function(){this.$navbox.is(":hidden")?(this.$navbox.show(),this.$sortbox.hide()):(this.$navbox.hide(),this.$sortbox.show())},g.liClickhandler=function(a){var b=$(a);this.$elem.val(b.text()),this.$hiddenPeople.val(b.data("liData").people),this.$hiddenChild.val(b.data("liData").child),this.$hiddenYear.val(b.data("liData").year),this.cbFn&&this.cbFn(b.data("liData")),this.hide()},g.createSelectNum=function(a,b){var c=$("<ul class='select-nav'></ul>"),d="",e=0;"peoplenum"===a?(d="成人",e=1):(d="儿童",e=0);for(var f=e;f<b+1;f++){var g=$('<li data="'+f+'">'+f+d+"</li>");c.append(g)}this.$sortbox.find("#"+a).parent().append(c),c.hide()},g.createChildNum=function(a){var b=this;a=parseInt(a,10);var c=parseInt(this.data.year,10);if(a>0){var d=$("<label>儿童年龄</label>"),e=$('<div class="group-right"></div>');this.$childContent.append(d);for(var f=0;f<a;f++){e.append('<div class="xzperson-input" id="child'+f+'"><input type="text" value="≤1岁"  data="1" readonly></div>');for(var g=$("<ul class='select-nav'></ul>"),h="",i=1;i<c+1;i++){h=1===i?"≤1岁":i+"岁";var j=$('<li data="'+i+'">'+h+"</li>");g.append(j)}e.find("#child"+f).append(g),g.hide()}this.$childContent.append(e),this.$childContent.find(".xzperson-input input").on("click",function(){return b.$sortbox.find(".select-nav").hide(),$(this).siblings(".select-nav").show(),!1}),this.$childContent.find(".xzperson-input .select-nav li").on("click",function(){b.setValuehandler($(this))}),this.$sortbox.find(".group-foot").before(this.$childContent)}},g.setValuehandler=function(a){var b=$(a);return"childnum"===b.parent().siblings().attr("id")&&(this.$childContent.children().remove(),this.createChildNum(b.attr("data"))),b.parents(".xzperson-input").find("input").val(b.text()).attr("data",b.attr("data")),b.parent().hide(),!1},g.show=function(){this.isShow||(this.setPos(),this.$container.css("visibility","visible"),this.isShow=!0)},g.hide=function(){this.isShow&&(this.$container.css({left:"-1000px",top:"-1000px",visibility:"hidden"}),this.isShow=!1)},g.setPos=function(){var a=this.$elem.offset();this.$container.css({left:a.left,top:a.top+this.$elem.outerHeight()})},g.stopEvent=function(a){a=a||window.event,a.stopPropagation?a.stopPropagation():a.cancelbubble=!0},d}),define("js/TreeSelect",["../js/Common"],function(a){function b(a,b){this.id=c.cid("TreeSelect"),this.ztreeId=c.cid("ztree"),this.opts=$.extend(!0,{},d,b),this.$elem=$(a),this.elem=a,this.$hiddenInput=$("#"+this.opts.hiddenName),this.hiddenInputVal=[],this.$hiddenInput.length&&(this.hiddenInputVal=(this.$hiddenInput.val()||"").split(this.opts.splitStr)),this.ztreeObj=null,this.checkedNodes=[],this.data=[],this.isShow=!1,this.init()}var c=a("../js/Common"),d={height:300,width:0,type:"radio",url:"",splitStr:",",isExpandAll:!0,filterParent:!1,cbFn:function(){},settings:{async:{enable:!1},data:{simpleData:{enable:!0,idKey:"id",pIdKey:"pId"},key:{name:"name"}}}};return b.prototype.init=function(){this.$container=$('<div class="vetech-treeSelect"></div>'),this.$treeContainer=$('<div class="ztree" id="'+this.ztreeId+'"></div>');var a=this.opts.width?this.opts.width:this.$elem.outerWidth();this.$container.css({width:a,height:this.opts.height}),this.$container.append(this.$treeContainer),$(document.body).append(this.$container);var b={check:{enable:"radio"!==this.opts.type},callback:{onNodeCreated:$.proxy(this.nodeCreatedHandler,this)}};if(this.settings=$.extend(!0,{},b,this.opts.settings),"radio"===this.opts.type){var c=this.settings.callback.onClick;"function"===$.type(c)?this.settings.callback.onClick=$.proxy(c,this):this.settings.callback.onClick=$.proxy(this.itemClickHandler,this)}else"checkbox"===this.opts.type&&(this.settings.callback.onCheck=$.proxy(this.itemCheckedHandler,this))},b.prototype.load=function(a){var b=this;if(this.settings.async.enable)this.settings.async.url=this.opts.url,a.call(b);else{var d=this.opts.url;"array"===$.type(d)?(this.data=d,a.call(b,b.data)):$.ajax({url:d,dataType:"json",type:"get",data:this.opts.qDatas,success:function(c){b.data=c,a.call(b,b.data)},error:function(a){c.error(a)}})}},b.prototype.render=function(){this.ztreeObj=$.fn.zTree.init(this.$treeContainer,this.settings,this.data);var a=this.settings.async.enable;!a&&this.opts.isExpandAll&&this.ztreeObj.expandAll(!0),a||setTimeout($.proxy(this.writeValue,this),500),this.bindEvent()},b.prototype.nodeCreatedHandler=function(a,b,c){$.inArray(c[this.opts.settings.data.simpleData.idKey],this.hiddenInputVal)>-1&&this.checkedNodes.push(c)},b.prototype.writeValue=function(){for(var a=0,b=this.checkedNodes.length;a<b;a++)this.ztreeObj.checkNode(this.checkedNodes[a],!0,!1);this.setValue()},b.prototype.setPos=function(){var a=this.$elem.offset(),b=this.$elem.outerHeight();this.$container.css({left:a.left,top:a.top+b})},b.prototype.show=function(){this.isShow||(this.setPos(),this.$container.css("visibility","visible"),this.isShow=!0)},b.prototype.hide=function(){this.isShow&&(this.$container.css({visibility:"hidden",left:"-1000px",top:"-1000px"}),this.isShow=!1)},b.prototype.destroy=function(){this.$container.remove(),$(document).off(".ztree")},b.prototype.bindEvent=function(){var a=this;$(document).on("click.ztree",function(b){b.target!==a.elem&&a.hide()}),this.$container.on("click.ztree",function(){return!1})},b.prototype.itemClickHandler=function(a,b,c){this.setValue(c),this.hide()},b.prototype.itemCheckedHandler=function(){this.checkedNodes=this.ztreeObj.getCheckedNodes(!0),this.setValue()},b.prototype.setValue=function(a){for(var b=a?[a]:this.checkedNodes,c=[],d=[],e=this.opts.settings.data.simpleData.idKey,f=this.opts.settings.data.key.name,g=0,h=b.length;g<h;g++)this.opts.filterParent&&b[g].isParent||(c.push(b[g][f]),d.push(b[g][e]));this.$elem.val(c.join(this.opts.splitStr)),this.$hiddenInput.val(d.join(this.opts.splitStr)),this.opts.cbFn(b)},b}),define("js/VMenu",["../js/Common"],function(a,b,c){"use strict";function d(a,b){this.id=g.cid("VMenu"),this.elem=a,this.$elem=$(a),this.opts=$.extend(!0,{},h,b),this.state="open"}function e(a){a.css({background:"#FCFCFC",color:"#999",cursor:"not-allowed"}),a.find("span").css("cursor","not-allowed"),a.attr("isDisabled",!0)}function f(a){a.hide()}var g=a("../js/Common"),h={width:100,model:1,type:1,typeValue:[],simpleData:{text:"text",icon:"icon"},cbFn:$.noop};return d.prototype.load=function(a){a="function"===$.type(a)?a:null;var b=this;1===this.opts.type?(this.data=this.opts.typeValue,delete this.opts.typeValue,a&&a.call(b,this.data)):$.ajax({type:"get",url:this.opts.typeValue,data:this.opts.qDatas||{},success:function(c){b.data=c,a&&a.call(b,c)},error:function(a){g.error(a)}})},d.prototype.init=function(){if("array"!==$.type(this.data))return void g.error("数据格式错误，菜单控件需要array");this.$container=$("<div class='vetech-menu-container'></div>");var a=$("<ul></ul>");this.$container.append(a);var b=this.data.length,c=this;if($.each(this.data,function(d,g){var h=$("<li class='menu-item'></li>");if(c.addExtendProps.call(c,h,g),g.icon){var i=$("<img src='"+g.icon+"'/>");h.append(i)}var j=$("<span>"+(g.text||"")+"</span>");h.append(j),d===b-1&&h.css("border-bottom","none");var k=c.opts.beforeInit;if("function"===$.type(k)){!1===k(c.$elem,h,c.opts.model,g)&&(1===c.opts.model?f(h):2===c.opts.model&&e(h))}h.data("data",g),a.append(h)}),c.data.length){$(document.body).append(c.$container);var d=c.opts.afterInit;d&&"function"===$.type(d)&&d(a.find("li"))}},d.prototype.bindEvent=function(){var a=this;this.$container.on("mousedown.vmenu",function(a){if(2===a.button)return!1}).on("contextmenu.vmenu",function(){return!1}).on("click.vmenu","li",function(){a.itemClick($(this))}).on("mouseenter.vmenu","li",function(){a.hoverHandler($(this))}).on("mouseleave.vmenu",function(){a.hide()}),$(document).on("mousemove."+a.id,function(b){var c=b.target;c===a.elem||$(c).parents(".vetech-menu-container").length?a.state="open":(a.state="isClosing",clearTimeout(a.timer),a.timer=setTimeout(function(){"isClosing"===a.state&&a.hide()},10))})},d.prototype.itemClick=function(a){if(!a.attr("isDisabled")){var b=this.opts.cbFn;b&&"function"===$.type(b)&&b(a,a.data("data")),this.hide()}},d.prototype.hoverHandler=function(a){"true"!==a.attr("isdisabled")&&(this.$container.find("li").css("background","#fff"),a.css("background","#ddd"))},d.prototype.setPos=function(){var a=this.$elem.offset(),b=$(document).width(),c=$(document).height();if(b-a.left-this.elem.offsetWidth<this.$container[0].offsetWidth?this.$container.css("left",a.left-this.$container[0].offsetWidth):this.$container.css("left",a.left+this.elem.offsetWidth),a.top+this.elem.offsetHeight/2<c/2||c-a.top-this.elem.offsetHeight>this.$container[0].offsetHeight)this.$container.css("top",a.top),c-a.top<this.$container[0].offsetHeight&&this.$container.css({height:c-a.top-10,overflow:"auto"});else{var d=a.top+this.elem.offsetHeight-this.$container.get(0).offsetHeight;d<0&&(d=0),this.$container.css("top",d),a.top+this.elem.offsetHeight<this.$container[0].offsetHeight&&this.$container.css({height:a.top+this.elem.offsetHeight-10,overflow:"auto"})}},d.prototype.show=function(){this.setPos(),this.$container.css("visibility","visible")},d.prototype.hide=function(){this.$container.hide(),this.destroy()},d.prototype.destroy=function(){this.$container.off(".vmenu"),$(document).off("."+this.id),this.$container.remove()},d.prototype.addExtendProps=function(a,b){var c=this.opts.simpleData;for(var d in b)b.hasOwnProperty(d)&&d!==c.text&&d!==c.icon&&a.attr(d,b[d])},d}),define("js/VetechSlider",["../js/Common"],function(a,b,c){function d(a,b){this.id=e.cid("VetechSlider"),this.opts=$.extend({},f,b),this.elem=a,this.$elem=$(a),this.cbFn=this.opts.cbFn||"",this.isMoving=!1,this.currIndex=0,this.nextIndex=0,this.timer={},this.direction=-1}var e=a("../js/Common"),f={width:600,height:300,defer:2e3,textAlign:"right",isAutoPlay:!0,showTitle:!0},g=d.prototype;return g.load=function(a){if("function"!==$.type(a))throw new Error("参数配置错误");var b=this;1===this.opts.type?(this.data=this.opts.typeValue,delete this.opts.typeValue,a.call(b,this.data)):$.ajax({type:"get",url:this.opts.typeValue,data:this.opts.qDatas,dataType:"json",success:function(c){b.data=c,a.call(b,c)},error:function(a){e.error(a)}})},g.render=function(){this.NUM=this.data.length,this.NUM&&(this.$container=$('<div class="vetech-swiper"><ul></ul><div class="switch-bar"></div></div>'),this.$nav=$("<ul></ul>"),this.$slidebar=$('<div class="switch-bar"></div>'),this.$container.css({width:this.opts.width,height:this.opts.height}),this.$slidebar.css("text-align",this.opts.textAlign),this.$leftBtn=$('<span class="switch-btn leftBtn"></span>'),this.$rightBtn=$('<span class="switch-btn rightBtn"></span>'),this.$container.append(this.$nav).append(this.$slidebar).append(this.$leftBtn).append(this.$rightBtn),this.$elem.append(this.$container),this.renderData())},g.renderData=function(){for(var a=0;a<this.NUM;a++){this.$nav.append(this.createLi(a,this.data[a]));var b=this.createPoint(a);0===a&&b.addClass("active"),this.$slidebar.append(b)}this.bindEvent(),this.autoPlay()},g.bindEvent=function(){var a=this;this.$leftBtn.on("click",$.proxy(this.leftBtnHandler,this)),this.$rightBtn.on("click",$.proxy(this.rightBtnHandler,this)),this.$container.on("click",".point",$.proxy(this.pointHandler,this)),this.$container.on("click","ul li",function(){"function"===$.type(a.cbFn)&&a.cbFn($(this))})},g.autoPlay=function(){if(this.opts.isAutoPlay){var a=this;this.timer=setInterval(function(){a.rightBtnHandler.call(a)},this.opts.defer)}},g.stopPlay=function(){this.timer&&clearInterval(this.timer)},g.switchHandler=function(){var a=this;if(!this.isMoving){this.isMoving=!0,this.stopPlay();var b=this.$container.find("li[data-index='"+this.currIndex+"']");this.$container.find(".point").removeClass("active").eq(this.nextIndex).addClass("active"),1===this.direction?(this.$nav.css("left",-this.opts.width),this.$container.find('li[data-index="'+this.nextIndex+'"]').insertBefore(b),this.$nav.animate({left:0},function(){a.currIndex=a.nextIndex,a.isMoving=!1,a.autoPlay.call(a)})):(b.after(this.$container.find("li[data-index='"+this.nextIndex+"']")),this.$nav.animate({left:-this.opts.width},function(){a.$nav.find("li").last().after(a.$nav.find("li").first()),a.$nav.css("left",0),a.currIndex=a.nextIndex,a.isMoving=!1,a.autoPlay.call(a)}))}},g.leftBtnHandler=function(){this.direction=1,this.nextIndex=this.currIndex<=0?this.NUM-1:this.currIndex-1,this.switchHandler()},g.rightBtnHandler=function(){this.direction=-1,this.nextIndex=this.currIndex>=this.NUM-1?0:this.currIndex+1,this.switchHandler()},g.pointHandler=function(a){if(!this.isMoving){var b=$(a.target);if(!b.hasClass("active")){var c=b.data("index");this.nextIndex=c,this.switchHandler()}}},g.createPoint=function(a){return $('<span class="point" data-index="'+a+'"></span>')},g.createLi=function(a,b){var c=$('<li data-index="'+a+'" style="width:'+this.opts.width+'px"></li>'),d=$("<a></a>"),e=$("<img/>"),f=$("<p>"+b.title+"</p>");return b.href?d.attr("href",b.href).attr("target","_blank"):d.attr("href","javascript:void(0);"),d.append(e),this.opts.showTitle&&d.append(f),c.append(d),e.attr("src",b.url).css({width:this.opts.width,height:this.opts.height}),e.on("error",function(){e.attr("src","../img/slide-btn.png"),e.off("error")}),c},d}),define("js/VetechTab",["../js/Common"],function(a,b,c){function d(a,b){this.id=e.cid("vetechTab"),this.elem=a,this.$elem=$(a),this.data={},this.opts=$.extend(!0,{},g,b),this.isShow=!1,this.tempData={},this.$hiddenInput=$("#"+this.opts.hiddenName),this.checkedItems={}}var e=a("../js/Common"),f=window.laytpl,g={type:1,typeValue:{},splitStr:",",itemWidth:55,tabWidth:100,rightWidth:180,mult:!1,title:"支持中文拼音/简拼/三字码的输入",simpleData:{id:"bh",name:"name"},beforeItemClick:function(){return!0},cbFn:function(){}};return d.prototype.load=function(a){if("function"!==$.type(a))throw new Error("参数配置错误");var b=this;1===this.opts.type?(this.data=this.opts.typeValue,delete this.opts.typeValue,a.call(b,this.data)):$.ajax({type:"get",url:this.opts.typeValue,data:this.opts.qDatas,dataType:"json",success:function(c){b.data=c,a.call(b,c)},error:function(a){e.error(a)}})},d.prototype.storeData=function(){for(var a=this.data,b=this.opts.simpleData.id,c=0,d=a.length;c<d;c++)for(var e=0,f=a[c].groups.length;e<f;e++)for(var g=a[c].groups[e].items,h=0,i=g.length;h<i;h++){var j=g[h];this.tempData[j[b]]=j}},d.prototype.init=function(a){var b=this;this.storeData();var c={title:this.opts.title,simpleData:this.opts.simpleData,list:this.data};e.loadTpl(window.CTPL.TAB,function(d,g){"error"===d&&e.tplError(),f(g).render(c,function(c){b.$container=$(c),$(document.body).append(b.$container),b.setWidth(),b.bindEvent(),b.tabClick(b.$container.find(".tab").eq(0).find("a")),a&&a.call(b)})})},d.prototype.setWidth=function(){var a=this.$container.find(".tab-header").find("li");a.css("width",this.opts.tabWidth),this.$container.width(a.length*this.opts.tabWidth+this.opts.rightWidth),this.$container.find(".tab-content").find("li").width(this.opts.itemWidth)},d.prototype.bindEvent=function(){var a=this;this.$container.on("click.vetechTab",".tab",function(b){a.tabClick($(b.target))}),this.$container.on("click.vetechTab",".item",$.proxy(this.itemClick,this)),this.$container.on("click.vetechTab",function(){return!1}),this.$container.on("click.vetechTab",".close",$.proxy(this.hide,this)),$(document).on("click.vetechTab",function(b){b.target!==a.elem&&a.hide()})},d.prototype.tabClick=function(a){var b=this.$container.find(".tab"),c=this.$container.find(".tab-content"),d=a.data("index");b.find("a").removeClass("active"),c.removeClass("active"),b.eq(d).find("a").addClass("active"),c.eq(d).addClass("active")},d.prototype.itemClick=function(a){var b=a.target,c=$(b),d=b.id,e=this.tempData[d];if(c.is("a"))if(this.opts.mult)c.parent().hasClass("active")?(c.parent().removeClass("active"),delete this.checkedItems[d]):(c.parent().addClass("active"),this.checkedItems[d]=e),this.setValue(this.checkedItems),this.opts.cbFn(this.checkedItems);else{var f=this.opts.beforeItemClick,g=!0;f&&"function"===$.type(f)&&(g=f(e)),g&&(this.$container.find(".tab-content li.active").removeClass("active"),c.parent().addClass("active"),this.setValue(e),this.opts.cbFn(e),this.hide())}},d.prototype.setValue=function(a){var b=this.opts.simpleData.id,c=this.opts.simpleData.name,d=[],e=[];if(this.opts.mult)for(var f in a)a.hasOwnProperty(f)&&(d.push(a[f][b]),e.push(a[f][c]));else d.push(a[b]),e.push(a[c]);this.$elem.val(e.join(this.opts.splitStr)),this.$hiddenInput.val(d.join(this.opts.splitStr))},d.prototype.show=function(){this.isShow||(this.setPos(),this.$container.show(),this.isShow=!0)},d.prototype.hide=function(){this.isShow&&(this.$container.hide(),this.isShow=!1)},d.prototype.setPos=function(){var a=this.$elem.offset();this.$container.css({left:a.left,top:a.top+this.$elem.outerHeight()})},d.prototype.destroy=function(){this.$container.off(".vetechTab"),$(document).off(".vetechTab"),this.$container.remove()},d.prototype.clearItemClick=function(){this.$container.find(".tab-content li.active").removeClass("active"),this.opts.mult&&(this.checkedItems={})},d}),define("js/YearAndMonth",["../js/Common"],function(a,b,c){function d(a,b,c){this.id=e.cid("yearAndMonth"),this.opts=$.extend({},f,b),this.opts.startTime="string"===$.type(this.opts.startTime)?parseInt(this.opts.startTime):this.opts.startTime,this.opts.endTime="string"===$.type(this.opts.endTime)?parseInt(this.opts.endTime):this.opts.endTime;var d=new Date;this.opts.currYear=this.opts.currYear?this.opts.currYear:d.getFullYear(),this.opts.currMonth=this.opts.currMonth?this.opts.currMonth:d.getMonth()+1,this.cbFn=c||function(){},this.$elem=$(a),this.elem=a,this.init()}var e=a("../js/Common"),f={yearName:"",monthName:"",disabledLater:!1,currYear:"",currMonth:"",startTime:(new Date).getFullYear()-20,endTime:(new Date).getFullYear()+20};return d.prototype.init=function(){this.$yearContainer=$('<select class="year"></select>'),this.opts.yearName&&this.$yearContainer.attr("name",this.opts.yearName),this.$monthContainer=$('<select class="month"></select>'),this.opts.monthName&&this.$monthContainer.attr("name",this.opts.monthName),this.$container=$('<div class="time-Container"></div>'),this.$container.append(this.$yearContainer).append(this.$monthContainer),this.hide(),this.$elem.append(this.$container),this.bindEvent()},d.prototype.render=function(){for(var a=this.opts.disabledLater?(new Date).getFullYear():this.opts.endTime,b=null,c=this.opts.startTime;c<=a;c++)b=$('<option value="'+c+'">'+c+"年</option>"),this.$yearContainer.append(b);for(var d=this.opts.disabledLater?(new Date).getMonth()+1:12,e=1;e<=d;e++){var f=e<10?"0"+e:e;b=$('<option value="'+f+'">'+e+"月</option>"),this.$monthContainer.append(b)}this.wirteValue()},d.prototype.wirteValue=function(){this.$yearContainer.val(this.opts.currYear);var a=parseInt(this.opts.currMonth);a=a<10?"0"+a:a,this.$monthContainer.val(a)},d.prototype.show=function(){this.$container.show()},d.prototype.hide=function(){this.$container.hide()},d.prototype.bindEvent=function(){this.$yearContainer.on("change",$.proxy(this.timeChangeHandler,this)),this.$monthContainer.on("change",$.proxy(this.timeChangeHandler,this))},d.prototype.timeChangeHandler=function(a){var b=$(a.target).find("option:selected").val();this.cbFn(a.target,b)},d}),define("js/YearAndMonthExtra",["../js/Common","../js/YearAndMonth","./Common"],function(a,b,c){function d(){var b=a("../js/Common"),c=a("../js/YearAndMonth");$.fn.addYearAndMonth=function(a,d){this.length||b.nodeError(this);var e=new c(this.get(0),a,d);e.render(),e.show()}}b.init=d}),define("js/YearQuarterMonth",["../js/Common"],function(a,b,c){function d(a,b){this.id=f.cid("YearQuarterMonth"),this.elem=a,this.$elem=$(a),this.opts=$.extend(!0,{},h,b),this.init()}var e=(new Date).getFullYear(),f=a("../js/Common"),g=window.layui?window.layui.laytpl:window.laytpl,h={startYear:e-10,endYear:e+10,chooseName:"choose",yearName:"year",month1Name:"month1",month2Name:"month2",cbFn:function(a,b){}};return d.prototype.init=function(){var a=this;f.loadTpl(window.CTPL.YEARQUARTERMONTH,function(b,c){"error"===b&&f.tplError(),g(c).render(a.opts,function(b){a.$container=$(b),a.$elem.html(a.$container),a.bindEvent(),a.chooseHandler("year")})})},d.prototype.bindEvent=function(){var a=this;this.$container.on("change.yearQuarterMonth","select",function(b){$(this).hasClass("choose")?a.chooseHandler(this.value):a.opts.cbFn(this,this.value)})},d.prototype.chooseHandler=function(a){this.$container.find("select").show().end().find("span").show(),"year"===a?(this.$container.find(".month1").hide().next("span").hide().next().hide(),this.$container.find(".month2").hide().next("span").hide()):"month"===a&&this.$container.find(".splitStr").hide().end().find(".month2").hide().next("span").hide()},d.prototype.destroy=function(){this.$container.off(".yearQuarterMonth"),this.$container.remove()},d}),define("js/provinceAndCityExtra",["../js/ProvinceAndCity"],function(a,b,c){function d(){var b=a("../js/ProvinceAndCity"),c=window.ssqx;c||console.log("ssqx数据获取失败");var d=c[0].data,f=c[1].data,g=[];$.each(d,function(a,b){b.type="p",b.citys=e(b.id,f),g.push(b)}),c=null,d=null,f=null,$.fn.showProvinceAndCity=function(a,c){var d=new b(this.get(0),a,c);d.load(g,function(){this.render(),this.writeValue()}),this.on("click",function(){d.show()})}}function e(a,b){var c=[];return $.each(b,function(b,d){d.pid===a&&(d.type="c",c.push(d))}),c}b.init=d}),define("js/treeSelectExtra",["../js/Common","../js/TreeSelect","./Common"],function(a,b){function c(){$.fn.showTreeSelect||($.fn.showTreeSelect=function(a){if(!this.length)return void d.nodeError(this);this.data("componentTreeSelect")&&(this.data("componentTreeSelect").destroy(),this.off(".ztree"));var b=new e(this.get(0),a),c=!1;this.on("click.ztree",function(){c?b.show():b.load(function(a){this.data=a.result,this.render(),this.show(),c=!0})})})}var d=a("../js/Common"),e=a("../js/TreeSelect");b.init=c}),define("js/vmenuExtra",["../js/VMenu","./Common"],function(a,b,c){function d(){$.fn.createMenu||($.fn.createMenu=function(a){var b=a.triggerType?a.triggerType:"mouseenter";$.each(this,function(c,d){$(d).on(b,function(){new e(this,a).load(function(){this.init(),this.bindEvent(),this.show()})})})})}var e=a("../js/VMenu");b.init=d});